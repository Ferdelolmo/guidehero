{"version":3,"file":"instrumentation.js","sourceRoot":"","sources":["../../../../src/instrumentations/userActions/instrumentation.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,gDAAkH;AAElH,iFAAsE;AAEtE;IAA+C,6CAAmB;IAAlE;;QACW,UAAI,GAAG,mDAAmD,CAAC;QAC3D,aAAO,GAAG,mBAAO,CAAC;;IAuB7B,CAAC;IAnBC,8CAAU,GAAV;QACQ,IAAA,KAAiD,IAAA,mDAAmB,EAAC,gBAAI,CAAC,EAAxE,gBAAgB,sBAAA,EAAE,wBAAwB,8BAA8B,CAAC;QACjF,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;QACzD,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,EAAiB;YACnD,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBACpC,gBAAgB,CAAC,EAAE,CAAC,CAAC;YACvB,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,GAAG,iCAAqB,CAAC,SAAS,CAAC,UAAC,EAAoB;gBAAlB,IAAI,UAAA,EAAE,UAAU,gBAAA;YACvE,IAAI,IAAI,KAAK,mBAAmB,EAAE,CAAC;gBACjC,wBAAwB,CAAC,UAAU,CAAC,CAAC;YACvC,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,2CAAO,GAAP;;QACE,MAAA,IAAI,CAAC,cAAc,0CAAE,WAAW,EAAE,CAAC;IACrC,CAAC;IACH,gCAAC;AAAD,CAAC,AAzBD,CAA+C,+BAAmB,GAyBjE;AAzBY,8DAAyB","sourcesContent":["import { BaseInstrumentation, faro, type Subscription, userActionsMessageBus, VERSION } from '@grafana/faro-core';\n\nimport { getUserEventHandler } from './processUserActionEventHandler';\n\nexport class UserActionInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-user-action';\n  readonly version = VERSION;\n\n  private _userActionSub?: Subscription;\n\n  initialize(): void {\n    const { processUserEvent, processUserActionStarted } = getUserEventHandler(faro);\n    window.addEventListener('pointerdown', processUserEvent);\n    window.addEventListener('keydown', (ev: KeyboardEvent) => {\n      if ([' ', 'Enter'].includes(ev.key)) {\n        processUserEvent(ev);\n      }\n    });\n\n    this._userActionSub = userActionsMessageBus.subscribe(({ type, userAction }) => {\n      if (type === 'user_action_start') {\n        processUserActionStarted(userAction);\n      }\n    });\n  }\n\n  destroy() {\n    this._userActionSub?.unsubscribe();\n  }\n}\n"]}