{
  "version": 3,
  "sources": ["../../ua-parser-js/src/ua-parser.js", "../../@grafana/faro-core/src/transports/const.ts", "../../@grafana/faro-core/src/utils/is.ts", "../../@grafana/faro-core/src/utils/deepEqual.ts", "../../@grafana/faro-core/src/utils/date.ts", "../../@grafana/faro-core/src/utils/logLevels.ts", "../../@grafana/faro-core/src/utils/noop.ts", "../../@grafana/faro-core/src/utils/promiseBuffer.ts", "../../@grafana/faro-core/src/utils/shortId.ts", "../../@grafana/faro-core/src/globalObject/globalObject.ts", "../../@grafana/faro-core/src/utils/sourceMaps.ts", "../../@grafana/faro-core/src/utils/json.ts", "../../@grafana/faro-core/src/utils/reactive.ts", "../../@grafana/faro-core/src/internalLogger/const.ts", "../../@grafana/faro-core/src/unpatchedConsole/const.ts", "../../@grafana/faro-core/src/unpatchedConsole/initialize.ts", "../../@grafana/faro-core/src/internalLogger/createInternalLogger.ts", "../../@grafana/faro-core/src/internalLogger/initialize.ts", "../../@grafana/faro-core/src/extensions/baseExtension.ts", "../../@grafana/faro-core/src/transports/base.ts", "../../@grafana/faro-core/src/transports/utils.ts", "../../@grafana/faro-core/src/transports/batchExecutor.ts", "../../@grafana/faro-core/src/transports/initialize.ts", "../../@grafana/faro-core/src/transports/registerInitial.ts", "../../@grafana/faro-core/src/sdk/const.ts", "../../@grafana/faro-core/src/sdk/internalFaroGlobalObject.ts", "../../@grafana/faro-core/src/sdk/faroGlobalObject.ts", "../../@grafana/faro-core/src/sdk/registerFaro.ts", "../../@grafana/faro-core/src/api/exceptions/const.ts", "../../@grafana/faro-core/src/api/events/initialize.ts", "../../@grafana/faro-core/src/api/logs/const.ts", "../../@grafana/faro-core/src/api/logs/initialize.ts", "../../@grafana/faro-core/src/api/measurements/initialize.ts", "../../@grafana/faro-core/src/api/meta/initialize.ts", "../../@grafana/faro-core/src/api/traces/initialize.ts", "../../@grafana/faro-core/src/api/userActions/const.ts", "../../@grafana/faro-core/src/api/userActions/types.ts", "../../@grafana/faro-core/src/api/initialize.ts", "../../@grafana/faro-core/src/instrumentations/base.ts", "../../@grafana/faro-core/src/instrumentations/initialize.ts", "../../@grafana/faro-core/src/instrumentations/registerInitial.ts", "../../@grafana/faro-core/src/metas/initialize.ts", "../../@grafana/faro-core/src/version.ts", "../../@grafana/faro-core/src/metas/registerInitial.ts", "../../@grafana/faro-core/src/initialize.ts", "../../@grafana/faro-core/src/config/const.ts", "../../@grafana/faro-core/src/semantic.ts", "../../@grafana/faro-core/src/consts.ts", "../../@grafana/faro-core/src/api/ItemBuffer.ts", "../../@grafana/faro-core/src/api/userActions/userAction.ts", "../../@grafana/faro-core/src/api/userActions/initialize.ts", "../../@grafana/faro-core/src/api/utils.ts", "../../@grafana/faro-core/src/api/exceptions/initialize.ts", "../../@grafana/faro-web-sdk/src/metas/browser/meta.ts", "../../@grafana/faro-web-sdk/src/metas/session/createSession.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/stackFrames/const.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/stackFrames/buildStackFrame.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/stackFrames/getDataFromSafariExtensions.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/stackFrames/getStackFramesFromError.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/stackFrames/parseStacktrace.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/const.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/getValueAndTypeFromMessage.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/getErrorDetails.ts", "../../@grafana/faro-web-sdk/src/instrumentations/console/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/registerOnerror.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/registerOnunhandledrejection.ts", "../../@grafana/faro-web-sdk/src/instrumentations/errors/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/view/instrumentation.ts", "../../web-vitals/dist/web-vitals.attribution.js", "../../@grafana/faro-web-sdk/src/utils/webStorage.ts", "../../@grafana/faro-web-sdk/src/utils/throttle.ts", "../../@grafana/faro-web-sdk/src/utils/url.ts", "../../@grafana/faro-web-sdk/src/instrumentations/instrumentationConstants.ts", "../../@grafana/faro-web-sdk/src/instrumentations/webVitals/webVitalsWithAttribution.ts", "../../@grafana/faro-web-sdk/src/instrumentations/webVitals/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/const.ts", "../../@grafana/faro-web-sdk/src/instrumentations/userActions/const.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/domMutationMonitor.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/httpRequestMonitor.ts", "../../@grafana/faro-web-sdk/src/instrumentations/performance/performanceConstants.ts", "../../@grafana/faro-web-sdk/src/instrumentations/performance/performanceUtils.ts", "../../@grafana/faro-web-sdk/src/instrumentations/performance/navigation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/performance/resource.ts", "../../@grafana/faro-web-sdk/src/instrumentations/performance/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/performanceEntriesMonitor.ts", "../../@grafana/faro-web-sdk/src/instrumentations/userActions/util.ts", "../../@grafana/faro-web-sdk/src/instrumentations/userActions/userActionController.ts", "../../@grafana/faro-web-sdk/src/instrumentations/userActions/processUserActionEventHandler.ts", "../../@grafana/faro-web-sdk/src/instrumentations/userActions/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/sessionConstants.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/sampling.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/sessionManagerUtils.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/PersistentSessionsManager.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/VolatileSessionManager.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/sessionManager/getSessionManagerByConfig.ts", "../../@grafana/faro-web-sdk/src/instrumentations/session/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/csp/instrumentation.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/activityWindowTracker.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/interactionMonitor.ts", "../../@grafana/faro-web-sdk/src/instrumentations/_internal/monitors/urlChangeMonitor.ts", "../../@grafana/faro-web-sdk/src/instrumentations/navigation/instrumentation.ts", "../../@grafana/faro-web-sdk/src/config/getWebInstrumentations.ts", "../../@grafana/faro-web-sdk/src/consts.ts", "../../@grafana/faro-web-sdk/src/transports/console/transport.ts", "../../@grafana/faro-web-sdk/src/transports/fetch/transport.ts", "../../@grafana/faro-web-sdk/src/metas/k6/meta.ts", "../../@grafana/faro-web-sdk/src/metas/page/meta.ts", "../../@grafana/faro-web-sdk/src/config/makeCoreConfig.ts", "../../@grafana/faro-web-sdk/src/initialize.ts"],
  "sourcesContent": ["/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.41\n   Copyright Â© 2012-2025 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.41',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HONOR   = 'Honor',\n        HUAWEI  = 'Huawei',\n        LENOVO  = 'Lenovo',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        NVIDIA  = 'Nvidia',\n        ONEPLUS = 'OnePlus',\n        OPERA   = 'Opera',\n        OPPO    = 'OPPO',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /(daum)apps[\\/ ]([\\w\\.]+)/i,                                        // Daum App\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser/Ladybird\n            /\\b(links) \\(([\\w\\.]+)/i                                            // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /\\b((amd|x|x86[-_]?|wow|win)64)\\b/i                                 // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i,                                                     // IA32 (quicktime)\n            /\\b((i[346]|x)86)(pc)?\\b/i                                          // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?[89]e?l?|_?64))\\b/i                               // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(v[67])?ht?n?[fl]p?)\\b/i                                     // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /( (ce|mobile); ppc;|\\/[\\w\\.]+arm\\b)/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((ppc|powerpc)(64)?)( mac|;|\\))/i                                  // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            / sun4\\w[;\\)]/i                                                     // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /\\b(avr32|ia64(?=;)|68k(?=\\))|\\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /\\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\\)|;)/i\n            ], [MODEL, [VENDOR, HONOR], [TYPE, TABLET]], [\n            /honor([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, HONOR], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\\w\\. ]*(?= bui|\\)))\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /oid[^\\)]+; (2[\\dbc]{4}(182|283|rp\\w{2})[cgl]|m2105k81a?c)(?: bui|\\))/i,\n            /\\b((?:red)?mi[-_ ]?pad[\\w- ]*)(?: bui|\\))/i                                // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i, // Xiaomi Mi\n            / ([\\w ]+) miui\\/v?\\d/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, OPPO], [TYPE, MOBILE]], [\n            /\\b(opd2(\\d{3}a?))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, strMapper, { 'OnePlus' : ['304', '403', '203'], '*' : OPPO }], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto(?! 360)[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv|watch)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\\d{3,4}(?:f[cu]|xu|[av])|yt\\d?-[jx]?\\d+[lfmx])( bui|;|\\)|\\/)/i,\n            /lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\\w- ]+?)|tb[\\w-]{6,7})( bui|;|\\)|\\/)/i\n            ], [MODEL, [VENDOR, LENOVO], [TYPE, TABLET]], [\n\n            // Nokia\n            /(nokia) (t[12][01])/i\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n            /(?:maemo|nokia).*(n900|lumia \\d+|rm-\\d+)/i,\n            /nokia[-_ ]?(([-\\w\\. ]*))/i\n            ], [[MODEL, /_/g, ' '], [TYPE, MOBILE], [VENDOR, 'Nokia']], [\n\n            // Google\n            /(pixel (c|tablet))\\b/i                                             // Google Pixel C/Tablet\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, ONEPLUS], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // Archos\n            /; (x67 5g|tikeasy \\w+|ac[1789]\\d\\w+)( b|\\))/i,\n            /archos ?(5|gamepad2?|([\\w ]*[t1789]|hello) ?\\d+[\\w ]*)( b|\\))/i\n            ], [MODEL, [VENDOR, 'Archos'], [TYPE, TABLET]], [\n            /archos ([\\w ]+)( b|\\))/i,\n            /; (ac[3-6]\\d\\w{2,8})( b|\\))/i \n            ], [MODEL, [VENDOR, 'Archos'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(infinix) (x1101b?)/i                                              // Infinix XPad\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (hmd|imo) ([\\w ]+?)(?: bui|\\))/i,                                // HMD/IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w ]+?)(?: bui|\\)|\\/)/i,                          // Lenovo\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /((?:tegranote|shield t(?!.+d tv))[\\w- ]*?)(?: b|\\))/i              // Nvidia Tablets\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /(shield \\w+ tv)/i                                                  // Nvidia Shield TV\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mi(tv|box)-?\\w+) bui/i                                            // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n                                                                                // SmartTV from Unidentified Vendors\n            /droid.+; ([\\w- ]+) (?:android tv|smart[- ]?tv)/i\n            ], [MODEL, [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield)( bui|\\))/i                                       // Nvidia Portable\n            ], [MODEL, [VENDOR, NVIDIA], [TYPE, CONSOLE]], [\n            /(playstation \\w+)/i                                                // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[0156][fnuw]?s?|gear live)\\b/i                       // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i,                                                   // Pebble\n            /(asus|google|lg|oppo) ((pixel |zen)?watch[\\w ]*)( bui|\\))/i        // Asus ZenWatch / LG Watch / Pixel Watch\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(ow(?:19|20)?we?[1-3]{1,3})/i                                      // Oppo Watch\n            ], [MODEL, [VENDOR, OPPO], [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /(opwwe\\d{3})/i                                                     // OnePlus Watch\n            ], [MODEL, [VENDOR, ONEPLUS], [TYPE, WEARABLE]], [\n            /(moto 360)/i                                                       // Motorola 360\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, WEARABLE]], [\n            /(smartwatch 3)/i                                                   // Sony SmartWatch\n            ], [MODEL, [VENDOR, SONY], [TYPE, WEARABLE]], [\n            /(g watch r)/i                                                      // LG G Watch R\n            ], [MODEL, [VENDOR, LG], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n            /(homepod).+mac os/i                                                // Apple HomePod\n            ], [MODEL, [VENDOR, APPLE], [TYPE, EMBEDDED]], [\n            /windows iot/i\n            ], [[TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /droid .+?; ([\\w\\. -]+)( bui|\\))/i                                  // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n\n            /\\b(libweb)/i                                                       // LibWeb\n            ], [NAME, VERSION], [\n            /ladybird\\//i\n            ], [[NAME, 'LibWeb']], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile|iot))[\\/ ]?([\\d\\.\\w ]*)/i         // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                          // Windows RT\n            /windows[\\/ ]([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /[adehimnop]{4,7}\\b(?:.*os ([\\w]+) like mac|; opera)/i,             // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               \n            /(ubuntu) ([\\w\\.]+) like android/i                                  // Ubuntu Touch\n            ], [[NAME, /(.+)/, '$1 Touch'], VERSION], [\n                                                                                // Android/Blackberry/WebOS/QNX/Bada/RIM/KaiOS/Maemo/MeeGo/S40/Sailfish OS/OpenHarmony/Tizen\n            /(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\\w*[-\\/; ]?([\\d\\.]*)/i\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\\/ ]?([\\w\\.]*)/i       // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux)(?: arm\\w*| x86\\w*| ?)([\\w\\.]*)/i,                     // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n", "import type { BodyKey } from './types';\n\nexport enum TransportItemType {\n  EXCEPTION = 'exception',\n  LOG = 'log',\n  MEASUREMENT = 'measurement',\n  TRACE = 'trace',\n  EVENT = 'event',\n}\n\nexport const transportItemTypeToBodyKey: Record<TransportItemType, BodyKey> = {\n  [TransportItemType.EXCEPTION]: 'exceptions',\n  [TransportItemType.LOG]: 'logs',\n  [TransportItemType.MEASUREMENT]: 'measurements',\n  [TransportItemType.TRACE]: 'traces',\n  [TransportItemType.EVENT]: 'events',\n} as const;\n", "export type IsFnHelper<T = unknown> = (value: unknown) => value is T;\n\nexport function isTypeof<T = unknown>(value: unknown, type: string): value is T {\n  return typeof value === type;\n}\n\nexport function isToString<T = unknown>(value: unknown, type: string): value is T {\n  return Object.prototype.toString.call(value) === `[object ${type}]`;\n}\n\nexport function isInstanceOf<T extends Function = any>(value: unknown, reference: T): value is T {\n  try {\n    return value instanceof reference;\n  } catch (_err) {\n    return false;\n  }\n}\n\nexport const isUndefined = ((value) => isTypeof(value, 'undefined')) as IsFnHelper<undefined>;\n\nexport const isNull = ((value) => isTypeof(value, 'null')) as IsFnHelper<null>;\n\nexport const isString = ((value) => isTypeof(value, 'string')) as IsFnHelper<string>;\n\nexport const isNumber = ((value) =>\n  (isTypeof<number>(value, 'number') && !isNaN(value)) || isTypeof(value, 'bigint')) as IsFnHelper<number | bigint>;\n\nexport const isInt = ((value) => isNumber(value) && Number.isInteger(value)) as IsFnHelper<number>;\n\nexport const isBoolean = ((value) => isTypeof(value, 'boolean')) as IsFnHelper<boolean>;\n\nexport const isSymbol = ((value) => isTypeof(value, 'symbol')) as IsFnHelper<Symbol>;\n\nexport const isObject = ((value) => !isNull(value) && isTypeof(value, 'object')) as IsFnHelper<object>;\n\nexport const isFunction = ((value) => isTypeof(value, 'function')) as IsFnHelper<Function>;\n\nexport const isArray = ((value) => isToString(value, 'Array')) as IsFnHelper<unknown[]>;\n\nexport const isRegExp = ((value) => isToString(value, 'RegExp')) as IsFnHelper<string>;\n\nexport const isThenable = ((value) => isFunction((value as any)?.then)) as IsFnHelper<{ then: Function }>;\n\nexport const isPrimitive = ((value) => !isObject(value) && !isFunction(value)) as IsFnHelper<\n  string | number | bigint | boolean | symbol\n>;\n\nexport const isEventDefined = typeof Event !== 'undefined';\n\nexport const isEvent = ((value) => isEventDefined && isInstanceOf(value, Event)) as IsFnHelper<Event>;\n\nexport const isErrorDefined = typeof Error !== 'undefined';\n\nexport const isError = ((value) => isErrorDefined && isInstanceOf(value, Error)) as IsFnHelper<Error>;\n\nexport const isErrorEvent = ((value) => isToString(value, 'ErrorEvent')) as IsFnHelper<ErrorEvent>;\n\nexport const isDomError = ((value) => isToString(value, 'DOMError')) as IsFnHelper<DOMException>;\n\nexport const isDomException = ((value) => isToString(value, 'DOMException')) as IsFnHelper<DOMException>;\n\nexport const isElementDefined = typeof Element !== 'undefined';\n\nexport const isElement = ((value) => isElementDefined && isInstanceOf(value, Element)) as IsFnHelper<Element>;\n\nexport const isMapDefined = typeof Map !== 'undefined';\n\nexport const isMap = ((value) => isMapDefined && isInstanceOf(value, Map)) as IsFnHelper<Map<any, any>>;\n\nexport const isSyntheticEvent = ((value: unknown) =>\n  isObject(value) &&\n  'nativeEvent' in value &&\n  'preventDefault' in value &&\n  'stopPropagation' in value) as unknown as IsFnHelper<Event>;\n\nexport function isEmpty(value: any): boolean {\n  if (value == null) {\n    return true;\n  }\n\n  if (isArray(value) || isString(value)) {\n    return value.length === 0;\n  }\n\n  if (isObject(value)) {\n    return Object.keys(value).length === 0;\n  }\n\n  return false;\n}\n", "import { isArray, isObject, isTypeof } from './is';\n\n// This function was inspired by fast-deep-equal\n// fast-deep-equal has issues with Rollup and also it checks for some edge cases that we don't need\n\nexport function deepEqual(a: any, b: any): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  // Using isTypeOf instead of isNumber as isNumber also checks against NaN\n  if (isTypeof(a, 'number') && isNaN(a as number)) {\n    return isTypeof(b, 'number') && isNaN(b as number);\n  }\n\n  const aIsArray = isArray(a);\n  const bIsArray = isArray(b);\n\n  if (aIsArray !== bIsArray) {\n    return false;\n  }\n\n  if (aIsArray && bIsArray) {\n    const length = a.length;\n\n    if (length !== b.length) {\n      return false;\n    }\n\n    for (let idx = length; idx-- !== 0; ) {\n      if (!deepEqual(a[idx], b[idx])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  const aIsObject = isObject(a);\n  const bIsObject = isObject(b);\n\n  if (aIsObject !== bIsObject) {\n    return false;\n  }\n\n  if (a && b && aIsObject && bIsObject) {\n    const aKeys = Object.keys(a) as Array<keyof typeof a>;\n    const bKeys = Object.keys(b);\n    const aLength = aKeys.length;\n    const bLength = bKeys.length;\n\n    if (aLength !== bLength) {\n      return false;\n    }\n\n    for (let aKey of aKeys) {\n      if (!bKeys.includes(aKey)) {\n        return false;\n      }\n    }\n\n    for (let aKey of aKeys) {\n      if (!deepEqual(a[aKey], b[aKey])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n", "export function dateNow(): number {\n  return Date.now();\n}\n\nexport function getCurrentTimestamp(): string {\n  return new Date().toISOString();\n}\n\nexport function timestampToIsoString(value: number): string {\n  return new Date(value).toISOString();\n}\n", "export enum LogLevel {\n  TRACE = 'trace',\n  DEBUG = 'debug',\n  INFO = 'info',\n  LOG = 'log',\n  WARN = 'warn',\n  ERROR = 'error',\n}\n\nexport const defaultLogLevel = LogLevel.LOG;\n\nexport const allLogLevels: Readonly<Array<Readonly<LogLevel>>> = [\n  LogLevel.TRACE,\n  LogLevel.DEBUG,\n  LogLevel.INFO,\n  LogLevel.LOG,\n  LogLevel.WARN,\n  LogLevel.ERROR,\n] as const;\n", "export function noop(): void {}\n", "export interface PromiseBufferOptions {\n  // total number of concurrent tasks\n  concurrency: number;\n  // total number of uncompleted tasks to accept\n  size: number;\n}\n\nexport type PromiseProducer<T> = () => PromiseLike<T>;\n\nexport interface PromiseBuffer<T> {\n  add(promiseProducer: PromiseProducer<T>): PromiseLike<T>;\n}\n\nexport interface BufferItem<T> {\n  producer: PromiseProducer<T>;\n  resolve: (value: T) => void;\n  reject: (reason?: any) => void;\n}\n\nexport function createPromiseBuffer<T>(options: PromiseBufferOptions): PromiseBuffer<T> {\n  const { size, concurrency } = options;\n\n  const buffer: Array<BufferItem<T>> = []; // pending, not-yet-started tasks\n  let inProgress = 0; // counter for tasks currently in progress\n\n  const work = () => {\n    // if there's space for a task and buffer is not empty,\n    // take one task from buffer and run it\n    if (inProgress < concurrency && buffer.length) {\n      const { producer, resolve, reject } = buffer.shift()!;\n\n      inProgress++;\n\n      producer().then(\n        (result) => {\n          inProgress--;\n\n          work();\n\n          resolve(result);\n        },\n        (reason) => {\n          inProgress--;\n\n          work();\n\n          reject(reason);\n        }\n      );\n    }\n  };\n\n  const add: PromiseBuffer<T>['add'] = (promiseProducer) => {\n    if (buffer.length + inProgress >= size) {\n      throw new Error('Task buffer full');\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      buffer.push({\n        producer: promiseProducer,\n        resolve,\n        reject,\n      });\n      work();\n    });\n  };\n\n  return {\n    add,\n  };\n}\n", "const alphabet = 'abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789';\n\nexport function genShortID(length = 10): string {\n  return Array.from(Array(length))\n    .map(() => alphabet[Math.floor(Math.random() * alphabet.length)]!)\n    .join('');\n}\n", "import type { Faro, internalGlobalObjectKey } from '../sdk';\n\nexport type GlobalObject<T = typeof globalThis | typeof global | typeof self> = T & {\n  [label: string]: Faro;\n\n  [internalGlobalObjectKey]: Faro;\n};\n\n// This does not uses isUndefined method because it will throw an error in non-browser environments\nexport const globalObject = (typeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof global !== 'undefined'\n    ? global\n    : typeof self !== 'undefined'\n      ? self\n      : undefined) as unknown as GlobalObject;\n", "import { globalObject } from '../globalObject';\n\nexport function getBundleId(appName: string): string | undefined {\n  return (globalObject as any)?.[`__faroBundleId_${appName}`];\n}\n", "import { isObject } from './is';\n\nexport function getCircularDependencyReplacer() {\n  const valueSeen = new WeakSet();\n  return function (_key: string | Symbol, value: unknown) {\n    if (isObject(value) && value !== null) {\n      if (valueSeen.has(value)) {\n        return null;\n      }\n      valueSeen.add(value);\n    }\n    return value;\n  };\n}\n\ntype JSONObject = {\n  [key: string]: JSONValue;\n};\ntype JSONArray = JSONValue[] & {};\ntype JSONValue = string | number | boolean | null | JSONObject | JSONArray;\n\nexport function stringifyExternalJson(json: any = {}) {\n  return JSON.stringify(json ?? {}, getCircularDependencyReplacer());\n}\n\nexport function stringifyObjectValues(obj: Record<string, unknown> = {}) {\n  const o: Record<string, string> = {};\n\n  for (const [key, value] of Object.entries(obj)) {\n    o[key] = isObject(value) && value !== null ? stringifyExternalJson(value) : String(value);\n  }\n\n  return o;\n}\n", "export type Subscription = {\n  unsubscribe: () => void;\n};\n\ntype Subscriber<T> = (value: T) => void;\n\nexport class Observable<T = any> {\n  private subscribers: Array<Subscriber<T>> = [];\n\n  subscribe(subscriber: Subscriber<T>): Subscription {\n    this.subscribers.push(subscriber);\n    return {\n      unsubscribe: () => this.unsubscribe(subscriber),\n    };\n  }\n\n  unsubscribe(subscriber: Subscriber<T>): void {\n    this.subscribers = this.subscribers.filter((sub) => sub !== subscriber);\n  }\n\n  notify(value: T): void {\n    this.subscribers.forEach((subscriber) => subscriber(value));\n  }\n\n  first(): Observable<T> {\n    const result = new Observable<T>();\n\n    const internalSubscriber = (data: T): void => {\n      result.notify(data);\n      subscription.unsubscribe();\n    };\n    const subscription = this.subscribe(internalSubscriber);\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  takeWhile(predicate: (value: T) => boolean): Observable<T> {\n    const result = new Observable<T>();\n    const internalSubscriber = (value: T): void => {\n      if (predicate(value)) {\n        result.notify(value);\n      } else {\n        result.unsubscribe(internalSubscriber);\n      }\n    };\n    this.subscribe(internalSubscriber);\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  filter(predicate: (value: T) => boolean): Observable<T> {\n    const result = new Observable<T>();\n\n    const internalSubscriber = (value: T): void => {\n      if (predicate(value)) {\n        result.notify(value);\n      }\n    };\n    this.subscribe(internalSubscriber);\n\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  merge(...observables: Array<Observable<T>>): Observable<T> {\n    const mergerObservable = new Observable<T>();\n    const subscriptions: Subscription[] = [];\n\n    observables.forEach((observable) => {\n      const subscription = observable.subscribe((value: T) => {\n        mergerObservable.notify(value);\n      });\n\n      subscriptions.push(subscription);\n    });\n\n    const originalUnsubscribeAll = mergerObservable.unsubscribeAll.bind(mergerObservable);\n\n    mergerObservable.unsubscribe = () => {\n      subscriptions.forEach((subscription) => subscription.unsubscribe());\n      originalUnsubscribeAll();\n    };\n\n    return mergerObservable;\n  }\n\n  private withUnsubscribeOverride(\n    observable: Observable<T>,\n    resultUnsubscribeFn: (subscriber: Subscriber<T>) => void,\n    internalSubscriber: Subscriber<T>\n  ) {\n    observable.unsubscribe = (subscriber: Subscriber<T>) => {\n      resultUnsubscribeFn(subscriber);\n      this.unsubscribe(internalSubscriber);\n    };\n\n    return observable;\n  }\n\n  private unsubscribeAll(): void {\n    this.subscribers = [];\n  }\n}\n", "import { noop } from '../utils';\n\nimport type { InternalLogger } from './types';\n\nexport enum InternalLoggerLevel {\n  OFF = 0,\n  ERROR = 1,\n  WARN = 2,\n  INFO = 3,\n  VERBOSE = 4,\n}\n\nexport const defaultInternalLoggerPrefix = 'Faro';\n\nexport const defaultInternalLogger: InternalLogger = {\n  debug: noop,\n  error: noop,\n  info: noop,\n  prefix: defaultInternalLoggerPrefix,\n  warn: noop,\n} as const;\n\nexport const defaultInternalLoggerLevel = InternalLoggerLevel.ERROR;\n", "import type { UnpatchedConsole } from './types';\n\nexport const defaultUnpatchedConsole: UnpatchedConsole = { ...console };\n", "import type { Config } from '../config';\n\nimport { defaultUnpatchedConsole } from './const';\nimport type { UnpatchedConsole } from './types';\n\nexport let unpatchedConsole: UnpatchedConsole = defaultUnpatchedConsole;\n\nexport function initializeUnpatchedConsole(config: Config): UnpatchedConsole {\n  unpatchedConsole = config.unpatchedConsole ?? unpatchedConsole;\n\n  return unpatchedConsole;\n}\n", "import { defaultUnpatchedConsole } from '../unpatchedConsole';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\nimport { noop } from '../utils';\n\nimport { defaultInternalLogger, defaultInternalLoggerLevel, InternalLoggerLevel } from './const';\nimport type { InternalLogger } from './types';\n\nexport function createInternalLogger(\n  unpatchedConsole: UnpatchedConsole = defaultUnpatchedConsole,\n  internalLoggerLevel = defaultInternalLoggerLevel\n): InternalLogger {\n  const internalLogger = defaultInternalLogger;\n\n  if (internalLoggerLevel > InternalLoggerLevel.OFF) {\n    internalLogger.error =\n      internalLoggerLevel >= InternalLoggerLevel.ERROR\n        ? function (...args) {\n            unpatchedConsole.error(`${internalLogger.prefix}\\n`, ...args);\n          }\n        : noop;\n\n    internalLogger.warn =\n      internalLoggerLevel >= InternalLoggerLevel.WARN\n        ? function (...args) {\n            unpatchedConsole.warn(`${internalLogger.prefix}\\n`, ...args);\n          }\n        : noop;\n\n    internalLogger.info =\n      internalLoggerLevel >= InternalLoggerLevel.INFO\n        ? function (...args) {\n            unpatchedConsole.info(`${internalLogger.prefix}\\n`, ...args);\n          }\n        : noop;\n\n    internalLogger.debug =\n      internalLoggerLevel >= InternalLoggerLevel.VERBOSE\n        ? function (...args) {\n            unpatchedConsole.debug(`${internalLogger.prefix}\\n`, ...args);\n          }\n        : noop;\n  }\n\n  return internalLogger;\n}\n", "import type { Config } from '../config';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\n\nimport { defaultInternalLogger } from './const';\nimport { createInternalLogger } from './createInternalLogger';\nimport type { InternalLogger } from './types';\n\nexport let internalLogger: InternalLogger = defaultInternalLogger;\n\nexport function initializeInternalLogger(unpatchedConsole: UnpatchedConsole, config: Config): InternalLogger {\n  internalLogger = createInternalLogger(unpatchedConsole, config.internalLoggerLevel);\n\n  return internalLogger;\n}\n", "import type { Config } from '../config';\nimport { defaultInternalLogger } from '../internalLogger';\nimport type { Metas } from '../metas';\nimport { defaultUnpatchedConsole } from '../unpatchedConsole';\n\nimport type { Extension } from './types';\n\nexport abstract class BaseExtension implements Extension {\n  abstract readonly name: string;\n  abstract readonly version: string;\n\n  unpatchedConsole = defaultUnpatchedConsole;\n  internalLogger = defaultInternalLogger;\n  config = {} as Config;\n  metas = {} as Metas;\n\n  logDebug(...args: unknown[]): void {\n    this.internalLogger.debug(`${this.name}\\n`, ...args);\n  }\n\n  logInfo(...args: unknown[]): void {\n    this.internalLogger.info(`${this.name}\\n`, ...args);\n  }\n\n  logWarn(...args: unknown[]): void {\n    this.internalLogger.warn(`${this.name}\\n`, ...args);\n  }\n\n  logError(...args: unknown[]): void {\n    this.internalLogger.error(`${this.name}\\n`, ...args);\n  }\n}\n", "import type { Patterns } from '..';\nimport { BaseExtension } from '../extensions';\n\nimport type { Transport, TransportItem } from './types';\n\nexport abstract class BaseTransport extends BaseExtension implements Transport {\n  abstract send(items: TransportItem | TransportItem[]): void | Promise<void>;\n\n  isBatched(): boolean {\n    return false;\n  }\n\n  getIgnoreUrls(): Patterns {\n    return [];\n  }\n}\n", "import type { IResourceSpans } from '@opentelemetry/otlp-transformer/build/src/trace/internal-types';\n\nimport type { EventEvent, ExceptionEvent, LogEvent, MeasurementEvent, TraceEvent } from '..';\n\nimport { TransportItemType, transportItemTypeToBodyKey } from './const';\nimport type { TransportBody, TransportItem } from './types';\n\nexport function mergeResourceSpans(traces?: TraceEvent, resourceSpans?: IResourceSpans[]): TraceEvent | undefined {\n  if (resourceSpans === undefined) {\n    return traces;\n  }\n\n  if (traces === undefined) {\n    return {\n      resourceSpans,\n    };\n  }\n\n  const currentResource = traces.resourceSpans?.[0];\n  if (currentResource === undefined) {\n    return traces;\n  }\n\n  const currentSpans = currentResource?.scopeSpans || [];\n  const newSpans = resourceSpans?.[0]?.scopeSpans || [];\n\n  return {\n    ...traces,\n    resourceSpans: [\n      {\n        ...currentResource,\n        scopeSpans: [...currentSpans, ...newSpans],\n      },\n    ],\n  };\n}\n\nexport function getTransportBody(item: TransportItem[]): TransportBody {\n  let body: TransportBody = {\n    meta: {},\n  };\n\n  if (item[0] !== undefined) {\n    body.meta = item[0].meta;\n  }\n\n  item.forEach((currentItem: TransportItem) => {\n    switch (currentItem.type) {\n      case TransportItemType.LOG:\n      case TransportItemType.EVENT:\n      case TransportItemType.EXCEPTION:\n      case TransportItemType.MEASUREMENT: {\n        const bk = transportItemTypeToBodyKey[currentItem.type];\n        const signals = body[bk] as LogEvent[] | EventEvent[] | ExceptionEvent[] | MeasurementEvent[];\n\n        body = {\n          ...body,\n          [bk]: signals === undefined ? [currentItem.payload] : [...signals, currentItem.payload],\n        };\n        break;\n      }\n      case TransportItemType.TRACE: {\n        body = {\n          ...body,\n          traces: mergeResourceSpans(body.traces, (currentItem.payload as TraceEvent).resourceSpans),\n        };\n        break;\n      }\n    }\n  });\n\n  return body;\n}\n", "import type { TransportItem } from '../';\n\nimport type { BatchExecutorOptions, SendFn } from './types';\n\nconst DEFAULT_SEND_TIMEOUT_MS = 250;\nconst DEFAULT_BATCH_ITEM_LIMIT = 50;\n\nexport class BatchExecutor {\n  private readonly itemLimit: number;\n  private readonly sendTimeout: number;\n\n  private signalBuffer: TransportItem[] = [];\n  private sendFn: SendFn;\n  private paused: boolean;\n  private flushInterval: number;\n\n  constructor(sendFn: SendFn, options?: BatchExecutorOptions) {\n    this.itemLimit = options?.itemLimit ?? DEFAULT_BATCH_ITEM_LIMIT;\n    this.sendTimeout = options?.sendTimeout ?? DEFAULT_SEND_TIMEOUT_MS;\n    this.paused = options?.paused || false;\n    this.sendFn = sendFn;\n    this.flushInterval = -1;\n\n    if (!this.paused) {\n      this.start();\n    }\n\n    // Send batched/buffered data when user navigates to new page, switches or closes the tab, minimizes or closes the browser.\n    // If on mobile, it also sends data if user switches from the browser to a different app.\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'hidden') {\n        this.flush();\n      }\n    });\n  }\n\n  addItem(item: TransportItem): void {\n    if (this.paused) {\n      return;\n    }\n\n    this.signalBuffer.push(item);\n\n    if (this.signalBuffer.length >= this.itemLimit) {\n      this.flush();\n    }\n  }\n\n  start(): void {\n    this.paused = false;\n    if (this.sendTimeout > 0) {\n      this.flushInterval = window.setInterval(() => this.flush(), this.sendTimeout);\n    }\n  }\n\n  pause(): void {\n    this.paused = true;\n    clearInterval(this.flushInterval);\n  }\n\n  groupItems(items: TransportItem[]): TransportItem[][] {\n    const itemMap = new Map<string, TransportItem[]>();\n    items.forEach((item) => {\n      const metaKey = JSON.stringify(item.meta);\n\n      let currentItems = itemMap.get(metaKey);\n      if (currentItems === undefined) {\n        currentItems = [item];\n      } else {\n        currentItems = [...currentItems, item];\n      }\n\n      itemMap.set(metaKey, currentItems);\n    });\n    return Array.from(itemMap.values());\n  }\n\n  private flush() {\n    if (this.paused || this.signalBuffer.length === 0) {\n      return;\n    }\n\n    const itemGroups = this.groupItems(this.signalBuffer);\n    itemGroups.forEach(this.sendFn);\n    this.signalBuffer = [];\n  }\n}\n", "import type { APIEvent, ExceptionEvent } from '../api';\nimport type { Config } from '../config';\nimport type { InternalLogger } from '../internalLogger';\nimport type { Metas } from '../metas';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\n\nimport { BatchExecutor } from './batchExecutor';\nimport { TransportItemType } from './const';\nimport type { BeforeSendHook, Transport, TransportItem, Transports } from './types';\n\nexport function initializeTransports(\n  unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  config: Config,\n  metas: Metas\n): Transports {\n  internalLogger.debug('Initializing transports');\n\n  const transports: Transport[] = [];\n\n  let paused = config.paused;\n\n  let beforeSendHooks: BeforeSendHook[] = [];\n\n  const add: Transports['add'] = (...newTransports) => {\n    internalLogger.debug('Adding transports');\n\n    newTransports.forEach((newTransport) => {\n      internalLogger.debug(`Adding \"${newTransport.name}\" transport`);\n\n      const exists = transports.some((existingTransport) => existingTransport === newTransport);\n\n      if (exists) {\n        internalLogger.warn(`Transport ${newTransport.name} is already added`);\n\n        return;\n      }\n\n      newTransport.unpatchedConsole = unpatchedConsole;\n      newTransport.internalLogger = internalLogger;\n      newTransport.config = config;\n      newTransport.metas = metas;\n\n      transports.push(newTransport);\n    });\n  };\n\n  const addBeforeSendHooks: Transports['addBeforeSendHooks'] = (...newBeforeSendHooks) => {\n    internalLogger.debug('Adding beforeSendHooks\\n', beforeSendHooks);\n\n    newBeforeSendHooks.forEach((beforeSendHook) => {\n      if (beforeSendHook) {\n        beforeSendHooks.push(beforeSendHook);\n      }\n    });\n  };\n\n  const applyBeforeSendHooks = (items: TransportItem[]): TransportItem[] => {\n    let filteredItems = items;\n    for (const hook of beforeSendHooks) {\n      const modified = filteredItems.map(hook).filter(Boolean) as TransportItem[];\n\n      if (modified.length === 0) {\n        return [];\n      }\n\n      filteredItems = sanitizeItems(modified, config);\n    }\n    return filteredItems;\n  };\n\n  const batchedSend = (items: TransportItem[]) => {\n    const filteredItems = applyBeforeSendHooks(items);\n\n    if (filteredItems.length === 0) {\n      return;\n    }\n\n    for (const transport of transports) {\n      internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItems);\n      if (transport.isBatched()) {\n        transport.send(filteredItems);\n      }\n    }\n  };\n\n  const instantSend = (item: TransportItem) => {\n    // prevent all beforeSend hooks being executed twice if batching is enabled.\n    if (config.batching?.enabled && transports.every((transport) => transport.isBatched())) {\n      return;\n    }\n\n    const [filteredItem] = applyBeforeSendHooks([item]);\n\n    if (filteredItem === undefined) {\n      return;\n    }\n\n    for (const transport of transports) {\n      internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItem);\n      if (!transport.isBatched()) {\n        transport.send(filteredItem);\n      } else if (!config.batching?.enabled) {\n        transport.send([filteredItem]);\n      }\n    }\n  };\n\n  let batchExecutor: BatchExecutor | undefined;\n\n  if (config.batching?.enabled) {\n    batchExecutor = new BatchExecutor(batchedSend, {\n      sendTimeout: config.batching.sendTimeout,\n      itemLimit: config.batching.itemLimit,\n      paused,\n    });\n  }\n\n  // Send a signal to the appropriate transports\n  //\n  // 1. If SDK is paused, early return\n  // 2. If batching is not enabled send the signal to all transports\n  //    instantly.\n  // 3i. If batching is enabled, enqueue the signal\n  // 3ii. Send the signal instantly to all un-batched transports\n  const execute: Transports['execute'] = (item) => {\n    if (paused) {\n      return;\n    }\n\n    if (config.batching?.enabled) {\n      batchExecutor?.addItem(item);\n    }\n\n    instantSend(item);\n  };\n\n  const getBeforeSendHooks: Transports['getBeforeSendHooks'] = () => [...beforeSendHooks];\n\n  const isPaused: Transports['isPaused'] = () => paused;\n\n  const pause: Transports['pause'] = () => {\n    internalLogger.debug('Pausing transports');\n    batchExecutor?.pause();\n\n    paused = true;\n  };\n\n  const remove: Transports['remove'] = (...transportsToRemove) => {\n    internalLogger.debug('Removing transports');\n\n    transportsToRemove.forEach((transportToRemove) => {\n      internalLogger.debug(`Removing \"${transportToRemove.name}\" transport`);\n\n      const existingTransportIndex = transports.indexOf(transportToRemove);\n\n      if (existingTransportIndex === -1) {\n        internalLogger.warn(`Transport \"${transportToRemove.name}\" is not added`);\n\n        return;\n      }\n\n      transports.splice(existingTransportIndex, 1);\n    });\n  };\n\n  const removeBeforeSendHooks: Transports['removeBeforeSendHooks'] = (...beforeSendHooksToRemove) => {\n    beforeSendHooks.filter((beforeSendHook) => !beforeSendHooksToRemove.includes(beforeSendHook));\n  };\n\n  const unpause: Transports['unpause'] = () => {\n    internalLogger.debug('Unpausing transports');\n    batchExecutor?.start();\n\n    paused = false;\n  };\n\n  return {\n    add,\n    addBeforeSendHooks,\n    getBeforeSendHooks,\n    execute,\n    isPaused,\n    pause,\n    remove,\n    removeBeforeSendHooks,\n    get transports() {\n      return [...transports];\n    },\n    unpause,\n  };\n}\n/**\n * Removes the `payload.originalError` property from the provided `TransportItem[]` parameter.\n */\nfunction sanitizeItems(filteredItems: Array<TransportItem<APIEvent>>, config: Config<APIEvent>) {\n  if (config.preserveOriginalError) {\n    for (const item of filteredItems) {\n      if (item.type === TransportItemType.EXCEPTION) {\n        delete (item as TransportItem<ExceptionEvent<true>>).payload.originalError;\n      }\n    }\n  }\n\n  return filteredItems;\n}\n", "import type { Faro } from '../sdk';\n\nexport function registerInitialTransports(faro: Faro): void {\n  faro.transports.add(...faro.config.transports);\n  faro.transports.addBeforeSendHooks(faro.config.beforeSend);\n}\n", "export const internalGlobalObjectKey = '_faroInternal';\n", "import { globalObject } from '../globalObject';\n\nimport { internalGlobalObjectKey } from './const';\nimport type { Faro } from './types';\n\nexport function getInternalFromGlobalObject(): Faro | undefined {\n  return globalObject[internalGlobalObjectKey];\n}\n\nexport function setInternalFaroOnGlobalObject(faro: Faro): void {\n  if (!faro.config.isolate) {\n    faro.internalLogger.debug('Registering internal Faro instance on global object');\n\n    Object.defineProperty(globalObject, internalGlobalObjectKey, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: faro,\n    });\n  } else {\n    faro.internalLogger.debug('Skipping registering internal Faro instance on global object');\n  }\n}\n\nexport function isInternalFaroOnGlobalObject(): boolean {\n  return internalGlobalObjectKey in globalObject;\n}\n", "import { globalObject } from '../globalObject';\n\nimport type { Faro } from './types';\n\nexport function setFaroOnGlobalObject(faro: Faro): void {\n  if (!faro.config.preventGlobalExposure) {\n    faro.internalLogger.debug(\n      `Registering public faro reference in the global scope using \"${faro.config.globalObjectKey}\" key`\n    );\n\n    if (faro.config.globalObjectKey in globalObject) {\n      faro.internalLogger.warn(\n        `Skipping global registration due to key \"${faro.config.globalObjectKey}\" being used already. Please set \"globalObjectKey\" to something else or set \"preventGlobalExposure\" to \"true\"`\n      );\n\n      return;\n    }\n\n    Object.defineProperty(globalObject, faro.config.globalObjectKey, {\n      configurable: false,\n      writable: false,\n      value: faro,\n    });\n  } else {\n    faro.internalLogger.debug('Skipping registering public Faro instance in the global scope');\n  }\n}\n", "import type { API } from '../api';\nimport type { Config } from '../config';\nimport type { Instrumentations } from '../instrumentations';\nimport type { InternalLogger } from '../internalLogger';\nimport type { Metas } from '../metas';\nimport type { Transports } from '../transports';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\n\nimport { setFaroOnGlobalObject } from './faroGlobalObject';\nimport { setInternalFaroOnGlobalObject } from './internalFaroGlobalObject';\nimport type { Faro } from './types';\n\nexport let faro: Faro = {} as Faro;\n\nexport function registerFaro(\n  unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  config: Config,\n  metas: Metas,\n  transports: Transports,\n  api: API,\n  instrumentations: Instrumentations\n): Faro {\n  internalLogger.debug('Initializing Faro');\n\n  faro = {\n    api,\n    config,\n    instrumentations,\n    internalLogger,\n    metas,\n    pause: transports.pause,\n    transports,\n    unpatchedConsole,\n    unpause: transports.unpause,\n  };\n\n  setInternalFaroOnGlobalObject(faro);\n\n  setFaroOnGlobalObject(faro);\n\n  return faro;\n}\n", "import { isObject, stringifyExternalJson } from '../../utils';\n\nexport const defaultExceptionType = 'Error';\n\nexport const defaultErrorArgsSerializer = (args: [any?, ...any[]]) => {\n  return args\n    .map((arg) => {\n      if (isObject(arg)) {\n        return stringifyExternalJson(arg);\n      }\n\n      return String(arg);\n    })\n    .join(' ');\n};\n", "import type { Config } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Metas } from '../../metas';\nimport { TransportItemType } from '../../transports';\nimport type { TransportItem, Transports } from '../../transports';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport type { TracesAPI } from '../traces';\nimport type { UserActionsAPI } from '../userActions';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\n\nimport type { EventEvent, EventsAPI } from './types';\n\nexport function initializeEventsAPI({\n  internalLogger,\n  config,\n  metas,\n  transports,\n  tracesApi,\n  userActionsApi,\n}: {\n  unpatchedConsole: UnpatchedConsole;\n  internalLogger: InternalLogger;\n  config: Config;\n  metas: Metas;\n  transports: Transports;\n  tracesApi: TracesAPI;\n  userActionsApi: UserActionsAPI;\n}): EventsAPI {\n  let lastPayload: Pick<EventEvent, 'name' | 'domain' | 'attributes'> | null = null;\n\n  const pushEvent: EventsAPI['pushEvent'] = (\n    name,\n    attributes,\n    domain,\n    { skipDedupe, spanContext, timestampOverwriteMs, customPayloadTransformer = (payload: EventEvent) => payload } = {}\n  ) => {\n    try {\n      const attrs = stringifyObjectValues(attributes);\n\n      const item: TransportItem<EventEvent> = {\n        meta: metas.value,\n        payload: customPayloadTransformer({\n          name,\n          domain: domain ?? config.eventDomain,\n          attributes: isEmpty(attrs) ? undefined : attrs,\n          timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n          trace: spanContext\n            ? {\n                trace_id: spanContext.traceId,\n                span_id: spanContext.spanId,\n              }\n            : tracesApi.getTraceContext(),\n        }),\n        type: TransportItemType.EVENT,\n      };\n\n      const testingPayload = {\n        name: item.payload.name,\n        attributes: item.payload.attributes,\n        domain: item.payload.domain,\n      };\n\n      if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n        internalLogger.debug('Skipping event push because it is the same as the last one\\n', item.payload);\n\n        return;\n      }\n\n      lastPayload = testingPayload;\n\n      internalLogger.debug('Pushing event\\n', item);\n\n      if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n        transports.execute(item);\n      }\n    } catch (err) {\n      internalLogger.error('Error pushing event', err);\n    }\n  };\n\n  return {\n    pushEvent,\n  };\n}\n", "import type { LogArgsSerializer } from './types';\n\nexport const defaultLogArgsSerializer: LogArgsSerializer = (args) =>\n  args\n    .map((arg) => {\n      try {\n        return String(arg);\n      } catch (_err) {\n        return '';\n      }\n    })\n    .join(' ');\n", "import type { Config } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Metas } from '../../metas';\nimport { TransportItemType } from '../../transports';\nimport type { TransportItem, Transports } from '../../transports';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\nimport { deepEqual, defaultLogLevel, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport type { TracesAPI } from '../traces';\nimport type { UserActionsAPI } from '../userActions';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\n\nimport { defaultLogArgsSerializer } from './const';\nimport type { LogEvent, LogsAPI } from './types';\n\nexport function initializeLogsAPI({\n  internalLogger,\n  config,\n  metas,\n  transports,\n  tracesApi,\n  userActionsApi,\n}: {\n  unpatchedConsole: UnpatchedConsole;\n  internalLogger: InternalLogger;\n  config: Config;\n  metas: Metas;\n  transports: Transports;\n  tracesApi: TracesAPI;\n  userActionsApi: UserActionsAPI;\n}): LogsAPI {\n  internalLogger.debug('Initializing logs API');\n\n  let lastPayload: Pick<LogEvent, 'message' | 'level' | 'context'> | null = null;\n\n  const logArgsSerializer = config.logArgsSerializer ?? defaultLogArgsSerializer;\n\n  const pushLog: LogsAPI['pushLog'] = (\n    args,\n    { context, level, skipDedupe, spanContext, timestampOverwriteMs } = {}\n  ) => {\n    try {\n      const ctx = stringifyObjectValues(context);\n\n      const item: TransportItem<LogEvent> = {\n        type: TransportItemType.LOG,\n        payload: {\n          message: logArgsSerializer(args),\n          level: level ?? defaultLogLevel,\n          context: isEmpty(ctx) ? undefined : ctx,\n          timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n          trace: spanContext\n            ? {\n                trace_id: spanContext.traceId,\n                span_id: spanContext.spanId,\n              }\n            : tracesApi.getTraceContext(),\n        },\n        meta: metas.value,\n      };\n\n      const testingPayload = {\n        message: item.payload.message,\n        level: item.payload.level,\n        context: item.payload.context,\n      };\n\n      if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n        internalLogger.debug('Skipping log push because it is the same as the last one\\n', item.payload);\n\n        return;\n      }\n\n      lastPayload = testingPayload;\n\n      internalLogger.debug('Pushing log\\n', item);\n\n      if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n        transports.execute(item);\n      }\n    } catch (err) {\n      internalLogger.error('Error pushing log\\n', err);\n    }\n  };\n\n  return {\n    pushLog,\n  };\n}\n", "import type { Config } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Metas } from '../../metas';\nimport { TransportItemType } from '../../transports';\nimport type { TransportItem, Transports } from '../../transports';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport type { TracesAPI } from '../traces';\nimport type { UserActionsAPI } from '../userActions';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\n\nimport type { MeasurementEvent, MeasurementsAPI } from './types';\n\nexport function initializeMeasurementsAPI({\n  internalLogger,\n  config,\n  metas,\n  transports,\n  tracesApi,\n  userActionsApi,\n}: {\n  unpatchedConsole: UnpatchedConsole;\n  internalLogger: InternalLogger;\n  config: Config;\n  metas: Metas;\n  transports: Transports;\n  tracesApi: TracesAPI;\n  userActionsApi: UserActionsAPI;\n}): MeasurementsAPI {\n  internalLogger.debug('Initializing measurements API');\n\n  let lastPayload: Pick<MeasurementEvent, 'type' | 'values' | 'context'> | null = null;\n\n  const pushMeasurement: MeasurementsAPI['pushMeasurement'] = (\n    payload,\n    { skipDedupe, context, spanContext, timestampOverwriteMs } = {}\n  ) => {\n    try {\n      const ctx = stringifyObjectValues(context);\n\n      const item: TransportItem<MeasurementEvent> = {\n        type: TransportItemType.MEASUREMENT,\n        payload: {\n          ...payload,\n          trace: spanContext\n            ? {\n                trace_id: spanContext.traceId,\n                span_id: spanContext.spanId,\n              }\n            : tracesApi.getTraceContext(),\n          timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n          context: isEmpty(ctx) ? undefined : ctx,\n        },\n        meta: metas.value,\n      };\n\n      const testingPayload = {\n        type: item.payload.type,\n        values: item.payload.values,\n        context: item.payload.context,\n      };\n\n      if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n        internalLogger.debug('Skipping measurement push because it is the same as the last one\\n', item.payload);\n\n        return;\n      }\n\n      lastPayload = testingPayload;\n\n      internalLogger.debug('Pushing measurement\\n', item);\n\n      if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n        transports.execute(item);\n      }\n    } catch (err) {\n      internalLogger.error('Error pushing measurement\\n', err);\n    }\n  };\n\n  return {\n    pushMeasurement,\n  };\n}\n", "import type { Config } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Meta, Metas } from '../../metas';\nimport type { Transports } from '../../transports';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\nimport { isEmpty, isString } from '../../utils/is';\nimport type { TracesAPI } from '../traces';\n\nimport type { MetaAPI } from './types';\n\nexport function initializeMetaAPI({\n  internalLogger,\n  metas,\n}: {\n  unpatchedConsole: UnpatchedConsole;\n  internalLogger: InternalLogger;\n  config: Config;\n  metas: Metas;\n  transports: Transports;\n  tracesApi: TracesAPI;\n}): MetaAPI {\n  internalLogger.debug('Initializing meta API');\n\n  let metaSession: Partial<Meta> | undefined = undefined;\n  let metaUser: Partial<Meta> | undefined = undefined;\n  let metaView: Partial<Meta> | undefined = undefined;\n  let metaPage: Partial<Meta> | undefined = undefined;\n\n  const setUser: MetaAPI['setUser'] = (user) => {\n    if (metaUser) {\n      metas.remove(metaUser);\n    }\n\n    metaUser = {\n      user,\n    };\n\n    metas.add(metaUser);\n  };\n\n  const setSession: MetaAPI['setSession'] = (session, options) => {\n    const newOverrides = options?.overrides;\n    const overrides = newOverrides\n      ? {\n          overrides: {\n            ...metaSession?.session?.overrides,\n            ...newOverrides,\n          },\n        }\n      : {};\n\n    if (metaSession) {\n      metas.remove(metaSession);\n    }\n\n    metaSession = {\n      session: {\n        // if session is undefined, session manager force creates a new session\n        ...(isEmpty(session) ? undefined : session),\n        ...overrides,\n      },\n    };\n\n    metas.add(metaSession);\n  };\n\n  const getSession: MetaAPI['getSession'] = () => metas.value.session;\n\n  const setView: MetaAPI['setView'] = (view, options) => {\n    if (options?.overrides) {\n      setSession(getSession(), { overrides: options.overrides });\n    }\n\n    if (metaView?.view?.name === view?.name) {\n      return;\n    }\n\n    const previousView = metaView;\n\n    metaView = {\n      view,\n    };\n\n    metas.add(metaView);\n\n    if (previousView) {\n      metas.remove(previousView);\n    }\n  };\n\n  const getView: MetaAPI['getView'] = () => metas.value.view;\n\n  const setPage: MetaAPI['setPage'] = (page) => {\n    const pageMeta = isString(page)\n      ? {\n          // metaPage is available once setPage() has been called.\n          // This is because page self updating metas like page need to be added as a function\n          // Thus we call getPage in case metaPage is empty\n          ...(metaPage?.page ?? getPage()),\n          id: page,\n        }\n      : page;\n\n    if (metaPage) {\n      metas.remove(metaPage);\n    }\n\n    metaPage = {\n      page: pageMeta,\n    };\n\n    metas.add(metaPage);\n  };\n\n  const getPage: MetaAPI['getPage'] = () => metas.value.page;\n\n  return {\n    setUser,\n    resetUser: setUser as MetaAPI['resetUser'],\n    setSession,\n    resetSession: setSession as MetaAPI['resetSession'],\n    getSession,\n    setView,\n    getView,\n    setPage,\n    getPage,\n  };\n}\n", "import type { Config } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Metas } from '../../metas';\nimport { TransportItemType } from '../../transports';\nimport type { TransportItem, Transports } from '../../transports/types';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\n\nimport type { OTELApi, TraceEvent, TracesAPI } from './types';\n\nexport function initializeTracesAPI(\n  _unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  _config: Config,\n  metas: Metas,\n  transports: Transports\n): TracesAPI {\n  internalLogger.debug('Initializing traces API');\n\n  let otel: OTELApi | undefined = undefined;\n\n  const initOTEL: TracesAPI['initOTEL'] = (trace, context) => {\n    internalLogger.debug('Initializing OpenTelemetry');\n\n    otel = {\n      trace,\n      context,\n    };\n  };\n\n  const getTraceContext: TracesAPI['getTraceContext'] = () => {\n    const ctx = otel?.trace.getSpanContext(otel.context.active());\n\n    return !ctx\n      ? undefined\n      : {\n          trace_id: ctx.traceId,\n          span_id: ctx.spanId,\n        };\n  };\n\n  const pushTraces: TracesAPI['pushTraces'] = (payload) => {\n    try {\n      const item: TransportItem<TraceEvent> = {\n        type: TransportItemType.TRACE,\n        payload,\n        meta: metas.value,\n      };\n\n      internalLogger.debug('Pushing trace\\n', item);\n\n      transports.execute(item);\n    } catch (err) {\n      internalLogger.error('Error pushing trace\\n', err);\n    }\n  };\n\n  const getOTEL: TracesAPI['getOTEL'] = () => otel;\n\n  const isOTELInitialized: TracesAPI['isOTELInitialized'] = () => !!otel;\n\n  return {\n    getOTEL,\n    getTraceContext,\n    initOTEL,\n    isOTELInitialized,\n    pushTraces,\n  };\n}\n", "export const userActionStartByApiCallEventName = 'faroApiCall';\n\nexport const userActionStart = 'user_action_start';\n\nexport const UserActionImportance = {\n  Normal: 'normal',\n  Critical: 'critical',\n} as const;\n\nexport type UserActionImportanceType = (typeof UserActionImportance)[keyof typeof UserActionImportance];\n\nexport const userActionEventName = 'faro.user.action';\n", "import { type TransportItem } from '../../transports';\n\nimport { type UserActionImportanceType, userActionStartByApiCallEventName } from './const';\n\nexport enum UserActionState {\n  Started,\n  Halted,\n  Cancelled,\n  Ended,\n}\n\n/**\n * Public interface for the UserAction.\n * This is the interface that is part of the public API.\n */\nexport interface UserActionInterface {\n  name: string;\n  parentId: string;\n}\n\n/**\n * Internal interface for the UserAction.\n * This interface is intended for internal use only and not guaranteed to be stable.\n */\nexport interface UserActionInternalInterface extends UserActionInterface {\n  halt(): void;\n  end(attributes?: Record<string, string>): void;\n  cancel(): void;\n  getState(): UserActionState;\n}\n\nexport interface UserActionTransportItemBuffer {\n  addItem(item: TransportItem): boolean;\n}\n\nexport type ApiUserActionEvent = {\n  name: string;\n  attributes?: Record<string, string>;\n  type: typeof userActionStartByApiCallEventName | string;\n};\n\nexport type EndUserActionProps = {\n  userActionName: string;\n  startTime: number;\n  endTime: number;\n  actionId: string;\n  event: ApiUserActionEvent;\n  attributes?: Record<string, string>;\n};\n\nexport type StartUserActionOptions = {\n  triggerName?: string;\n  importance?: UserActionImportanceType;\n};\n\nexport interface UserActionsAPI {\n  startUserAction: (\n    name: string,\n    attributes?: Record<string, string>,\n    options?: StartUserActionOptions\n  ) => UserActionInterface | undefined;\n  getActiveUserAction: () => UserActionInterface | undefined;\n}\n\nexport type UserActionStart = {\n  type: 'user_action_start';\n  userAction: UserActionInterface;\n};\n\n// Union type\nexport type UserActionMessage = UserActionStart;\n", "import type { Config } from '../config';\nimport type { InternalLogger } from '../internalLogger';\nimport type { Metas } from '../metas';\nimport type { Transports } from '../transports';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\n\nimport { initializeEventsAPI } from './events';\nimport { initializeExceptionsAPI } from './exceptions';\nimport { initializeLogsAPI } from './logs';\nimport { initializeMeasurementsAPI } from './measurements';\nimport { initializeMetaAPI } from './meta';\nimport { initializeTracesAPI } from './traces';\nimport type { API } from './types';\nimport { initializeUserActionsAPI } from './userActions';\n\nexport function initializeAPI(\n  unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  config: Config,\n  metas: Metas,\n  transports: Transports\n): API {\n  internalLogger.debug('Initializing API');\n\n  const userActionsApi = initializeUserActionsAPI({\n    transports,\n    config,\n    internalLogger,\n  });\n\n  const tracesApi = initializeTracesAPI(unpatchedConsole, internalLogger, config, metas, transports);\n\n  const props = {\n    unpatchedConsole,\n    internalLogger,\n    userActionsApi,\n    config,\n    metas,\n    transports,\n    tracesApi,\n  };\n\n  return {\n    ...tracesApi,\n    ...initializeExceptionsAPI(props),\n    ...initializeMetaAPI(props),\n    ...initializeLogsAPI(props),\n    ...initializeMeasurementsAPI(props),\n    ...initializeEventsAPI(props),\n    ...userActionsApi,\n  };\n}\n", "import type { API } from '../api';\nimport { BaseExtension } from '../extensions';\nimport type { Transports } from '../transports';\n\nimport type { Instrumentation } from './types';\n\nexport abstract class BaseInstrumentation extends BaseExtension implements Instrumentation {\n  api: API = {} as API;\n  transports: Transports = {} as Transports;\n\n  abstract initialize(): void;\n}\n", "import type { API } from '../api';\nimport type { Config } from '../config';\nimport type { InternalLogger } from '../internalLogger';\nimport type { Metas } from '../metas';\nimport type { Transports } from '../transports';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\n\nimport type { Instrumentation, Instrumentations } from './types';\n\nexport function initializeInstrumentations(\n  unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  config: Config,\n  metas: Metas,\n  transports: Transports,\n  api: API\n): Instrumentations {\n  internalLogger.debug('Initializing instrumentations');\n\n  const instrumentations: Instrumentation[] = [];\n\n  const add: Instrumentations['add'] = (...newInstrumentations) => {\n    internalLogger.debug('Adding instrumentations');\n\n    newInstrumentations.forEach((newInstrumentation) => {\n      internalLogger.debug(`Adding \"${newInstrumentation.name}\" instrumentation`);\n\n      const exists = instrumentations.some(\n        (existingInstrumentation) => existingInstrumentation.name === newInstrumentation.name\n      );\n\n      if (exists) {\n        internalLogger.warn(`Instrumentation ${newInstrumentation.name} is already added`);\n\n        return;\n      }\n\n      newInstrumentation.unpatchedConsole = unpatchedConsole;\n      newInstrumentation.internalLogger = internalLogger;\n      newInstrumentation.config = config;\n      newInstrumentation.metas = metas;\n      newInstrumentation.transports = transports;\n      newInstrumentation.api = api;\n\n      instrumentations.push(newInstrumentation);\n\n      newInstrumentation.initialize();\n    });\n  };\n\n  const remove: Instrumentations['remove'] = (...instrumentationsToRemove) => {\n    internalLogger.debug('Removing instrumentations');\n\n    instrumentationsToRemove.forEach((instrumentationToRemove) => {\n      internalLogger.debug(`Removing \"${instrumentationToRemove.name}\" instrumentation`);\n\n      const existingInstrumentationIndex = instrumentations.reduce<number | null>(\n        (acc, existingInstrumentation, existingTransportIndex) => {\n          if (acc === null && existingInstrumentation.name === instrumentationToRemove.name) {\n            return existingTransportIndex;\n          }\n\n          return null;\n        },\n        null\n      );\n\n      if (existingInstrumentationIndex === null) {\n        internalLogger.warn(`Instrumentation \"${instrumentationToRemove.name}\" is not added`);\n\n        return;\n      }\n\n      instrumentations[existingInstrumentationIndex]!.destroy?.();\n\n      instrumentations.splice(existingInstrumentationIndex, 1);\n    });\n  };\n\n  return {\n    add,\n    get instrumentations() {\n      return [...instrumentations];\n    },\n    remove,\n  };\n}\n", "import type { Faro } from '../sdk';\n\nexport function registerInitialInstrumentations(faro: Faro): void {\n  faro.instrumentations.add(...faro.config.instrumentations);\n}\n", "import type { Config } from '../config';\nimport type { InternalLogger } from '../internalLogger';\nimport type { UnpatchedConsole } from '../unpatchedConsole';\nimport { isFunction } from '../utils';\n\nimport type { Meta, MetaItem, Metas, MetasListener } from './types';\n\nexport function initializeMetas(\n  _unpatchedConsole: UnpatchedConsole,\n  internalLogger: InternalLogger,\n  _config: Config\n): Metas {\n  let items: MetaItem[] = [];\n  let listeners: MetasListener[] = [];\n\n  const getValue = () => items.reduce<Meta>((acc, item) => Object.assign(acc, isFunction(item) ? item() : item), {});\n\n  const notifyListeners = () => {\n    if (listeners.length) {\n      const value = getValue();\n\n      listeners.forEach((listener) => listener(value));\n    }\n  };\n\n  const add: Metas['add'] = (...newItems) => {\n    internalLogger.debug('Adding metas\\n', newItems);\n\n    items.push(...newItems);\n\n    notifyListeners();\n  };\n\n  const remove: Metas['remove'] = (...itemsToRemove) => {\n    internalLogger.debug('Removing metas\\n', itemsToRemove);\n\n    items = items.filter((currentItem) => !itemsToRemove.includes(currentItem));\n\n    notifyListeners();\n  };\n\n  const addListener: Metas['addListener'] = (listener) => {\n    internalLogger.debug('Adding metas listener\\n', listener);\n\n    listeners.push(listener);\n  };\n\n  const removeListener: Metas['removeListener'] = (listener) => {\n    internalLogger.debug('Removing metas listener\\n', listener);\n\n    listeners = listeners.filter((currentListener) => currentListener !== listener);\n  };\n\n  return {\n    add,\n    remove,\n    addListener,\n    removeListener,\n    get value() {\n      return getValue();\n    },\n  };\n}\n", "// auto-generated by bin/genVersion.ts\nexport const VERSION = '2.0.2';\n", "import type { Faro } from '../sdk';\nimport { getBundleId } from '../utils/sourceMaps';\nimport { VERSION } from '../version';\n\nimport type { Meta } from './types';\n\nexport function registerInitialMetas(faro: Faro): void {\n  const initial: Meta = {\n    sdk: {\n      version: VERSION,\n    },\n    app: {\n      bundleId: faro.config.app.name && getBundleId(faro.config.app.name),\n    },\n  };\n\n  const session = faro.config.sessionTracking?.session;\n  if (session) {\n    faro.api.setSession(session);\n  }\n\n  if (faro.config.app) {\n    initial.app = { ...faro.config.app, ...initial.app };\n  }\n\n  if (faro.config.user) {\n    initial.user = faro.config.user;\n  }\n\n  if (faro.config.view) {\n    initial.view = faro.config.view;\n  }\n\n  faro.metas.add(initial, ...(faro.config.metas ?? []));\n}\n", "import { initializeAPI } from './api';\nimport type { Config } from './config';\nimport { initializeInstrumentations, registerInitialInstrumentations } from './instrumentations';\nimport { initializeInternalLogger } from './internalLogger';\nimport { initializeMetas, registerInitialMetas } from './metas';\nimport { isInternalFaroOnGlobalObject, registerFaro } from './sdk';\nimport type { Faro } from './sdk';\nimport { initializeTransports, registerInitialTransports } from './transports';\nimport { initializeUnpatchedConsole } from './unpatchedConsole';\n\nexport function initializeFaro(config: Config): Faro {\n  const unpatchedConsole = initializeUnpatchedConsole(config);\n  const internalLogger = initializeInternalLogger(unpatchedConsole, config);\n\n  if (isInternalFaroOnGlobalObject() && !config.isolate) {\n    internalLogger.error(\n      'Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the \"isolate\" property'\n    );\n\n    return undefined!;\n  }\n\n  internalLogger.debug('Initializing');\n\n  // Initializing the APIs\n  const metas = initializeMetas(unpatchedConsole, internalLogger, config);\n  const transports = initializeTransports(unpatchedConsole, internalLogger, config, metas);\n  const api = initializeAPI(unpatchedConsole, internalLogger, config, metas, transports);\n  const instrumentations = initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api);\n  const faro = registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations);\n\n  // make sure Faro is initialized before registering default metas, instrumentations, transports etc.\n  registerInitialMetas(faro);\n  registerInitialTransports(faro);\n  registerInitialInstrumentations(faro);\n\n  return faro;\n}\n", "export const defaultGlobalObjectKey = 'faro';\n\nexport const defaultBatchingConfig = {\n  enabled: true,\n  sendTimeout: 250,\n  itemLimit: 50,\n};\n", "export const EVENT_CLICK = 'click';\nexport const EVENT_NAVIGATION = 'navigation';\nexport const EVENT_VIEW_CHANGED = 'view_changed';\nexport const EVENT_SESSION_START = 'session_start';\nexport const EVENT_SESSION_RESUME = 'session_resume';\nexport const EVENT_SESSION_EXTEND = 'session_extend';\nexport const EVENT_OVERRIDES_SERVICE_NAME = 'service_name_override';\nexport const EVENT_ROUTE_CHANGE = 'route_change';\n", "export const unknownString = 'unknown';\n", "import { isFunction } from '../utils/is';\n\nexport class ItemBuffer<T> {\n  private buffer: T[];\n\n  constructor() {\n    this.buffer = [];\n  }\n\n  addItem(item: T) {\n    this.buffer.push(item);\n  }\n\n  flushBuffer(cb?: (item: T) => void) {\n    if (isFunction(cb)) {\n      for (const item of this.buffer) {\n        cb(item);\n      }\n    }\n\n    this.buffer.length = 0;\n  }\n\n  size() {\n    return this.buffer.length;\n  }\n}\n", "import { faro } from '../../sdk/registerFaro';\nimport { type TransportItem, TransportItemType, type Transports } from '../../transports';\nimport { dateNow, genShortID, Observable, stringifyObjectValues } from '../../utils';\nimport { ItemBuffer } from '../ItemBuffer';\nimport { type MeasurementEvent } from '../measurements';\nimport { type APIEvent } from '../types';\n\nimport { userActionEventName, UserActionImportance, type UserActionImportanceType } from './const';\nimport { type UserActionInternalInterface, UserActionState, type UserActionTransportItemBuffer } from './types';\n\nexport default class UserAction\n  extends Observable\n  implements UserActionInternalInterface, UserActionTransportItemBuffer\n{\n  name: string;\n  id: string;\n  attributes?: Record<string, string>;\n  parentId: string;\n  trigger: string;\n  importance: UserActionImportanceType;\n  startTime?: number;\n  trackUserActionsExcludeItem?: (item: TransportItem<APIEvent>) => boolean;\n\n  private _state: UserActionState;\n  private _itemBuffer: ItemBuffer<TransportItem>;\n  private _transports: Transports;\n\n  constructor({\n    name,\n    parentId,\n    trigger,\n    transports,\n    attributes,\n    trackUserActionsExcludeItem,\n    importance = UserActionImportance.Normal,\n  }: {\n    name: string;\n    transports: Transports;\n    parentId?: string;\n    trigger: string;\n    attributes?: Record<string, string>;\n    trackUserActionsExcludeItem?: (item: TransportItem<APIEvent>) => boolean;\n    importance?: UserActionImportanceType;\n  }) {\n    super();\n    this.name = name;\n    this.attributes = attributes;\n    this.id = genShortID();\n    this.trigger = trigger;\n    this.parentId = parentId ?? this.id;\n    this.trackUserActionsExcludeItem = trackUserActionsExcludeItem;\n    this.importance = importance;\n\n    this._itemBuffer = new ItemBuffer<TransportItem>();\n    this._transports = transports;\n    this._state = UserActionState.Started;\n    this._start();\n  }\n\n  addItem(item: TransportItem): boolean {\n    if (this._state === UserActionState.Started) {\n      this._itemBuffer.addItem(item);\n      return true;\n    }\n    return false;\n  }\n\n  private _start(): void {\n    this._state = UserActionState.Started;\n    if (this._state === UserActionState.Started) {\n      this.startTime = dateNow();\n    }\n  }\n\n  halt() {\n    if (this._state !== UserActionState.Started) {\n      return;\n    }\n    this._state = UserActionState.Halted;\n    this.notify(this._state);\n  }\n\n  cancel() {\n    if (this._state === UserActionState.Started) {\n      // Empty the buffer\n      this._itemBuffer.flushBuffer();\n    }\n\n    this._state = UserActionState.Cancelled;\n    this.notify(this._state);\n  }\n\n  end() {\n    if (this._state === UserActionState.Cancelled) {\n      return;\n    }\n\n    const endTime = dateNow();\n    const duration = endTime - this.startTime!;\n    this._state = UserActionState.Ended;\n    this._itemBuffer.flushBuffer((item) => {\n      if (isExcludeFromUserAction(item, this.trackUserActionsExcludeItem)) {\n        this._transports.execute(item);\n        return;\n      }\n\n      const userActionItem = {\n        ...item,\n        payload: {\n          ...item.payload,\n          action: {\n            parentId: this.id,\n            name: this.name,\n          },\n        },\n      } as TransportItem;\n\n      this._transports.execute(userActionItem);\n    });\n\n    this._state = UserActionState.Ended;\n    this.notify(this._state);\n\n    faro.api.pushEvent(\n      userActionEventName,\n      {\n        userActionName: this.name,\n        userActionStartTime: this.startTime!.toString(),\n        userActionEndTime: endTime.toString(),\n        userActionDuration: duration.toString(),\n        userActionTrigger: this.trigger!,\n        userActionImportance: this.importance,\n        ...stringifyObjectValues(this.attributes),\n      },\n      undefined,\n      {\n        timestampOverwriteMs: this.startTime,\n        customPayloadTransformer: (payload) => {\n          payload.action = {\n            id: this.id,\n            name: this.name,\n          };\n\n          return payload;\n        },\n      }\n    );\n  }\n\n  getState(): UserActionState {\n    return this._state;\n  }\n}\n\nfunction isExcludeFromUserAction(\n  item: TransportItem<APIEvent>,\n  trackUserActionsExcludeItem: ((item: TransportItem<APIEvent>) => boolean) | undefined\n) {\n  return (\n    trackUserActionsExcludeItem?.(item) ||\n    (item.type === TransportItemType.MEASUREMENT && (item.payload as MeasurementEvent).type === 'web-vitals')\n  );\n}\n", "import { type InternalLogger, type TransportItem, type Transports } from '../..';\nimport type { Config } from '../../config';\nimport { Observable } from '../../utils/reactive';\n\nimport { UserActionImportance, userActionStart, userActionStartByApiCallEventName } from './const';\nimport {\n  type StartUserActionOptions,\n  type UserActionInterface,\n  type UserActionInternalInterface,\n  type UserActionMessage,\n  type UserActionsAPI,\n  UserActionState,\n  type UserActionTransportItemBuffer,\n} from './types';\nimport UserAction from './userAction';\n\nexport const userActionsMessageBus = new Observable<UserActionMessage>();\n\nexport function initializeUserActionsAPI({\n  transports,\n  internalLogger,\n  config,\n}: {\n  transports: Transports;\n  config: Config;\n  internalLogger: InternalLogger;\n}): UserActionsAPI {\n  const trackUserActionsExcludeItem = config.userActionsInstrumentation?.excludeItem;\n\n  // Currently running user action. It can be in either started or halted\n  // state\n  let activeUserAction: UserAction | undefined;\n\n  // If there is a an action already running, return undefined to indicate\n  // we were not able to create one.\n  const startUserAction: UserActionsAPI['startUserAction'] = (\n    name: string,\n    attributes?: Record<string, string>,\n    options?: StartUserActionOptions\n  ): UserActionInterface | undefined => {\n    const currentRunningUserAction = getActiveUserAction();\n\n    if (currentRunningUserAction === undefined) {\n      const userAction = new UserAction({\n        name,\n        transports,\n        attributes,\n        trigger: options?.triggerName || userActionStartByApiCallEventName,\n        importance: options?.importance || UserActionImportance.Normal,\n        trackUserActionsExcludeItem,\n      });\n      userAction\n        .filter((v) => [UserActionState.Ended, UserActionState.Cancelled].includes(v))\n        .first()\n        .subscribe(() => {\n          activeUserAction = undefined;\n        });\n\n      userActionsMessageBus.notify({\n        type: userActionStart,\n        userAction: userAction,\n      });\n      activeUserAction = userAction;\n\n      return activeUserAction;\n    } else {\n      internalLogger.error('Attempted to create a new user action while one is already running. This is not possible.');\n      return undefined;\n    }\n  };\n\n  const getActiveUserAction: UserActionsAPI['getActiveUserAction'] = (): UserActionInterface | undefined => {\n    return activeUserAction;\n  };\n\n  const api: UserActionsAPI = {\n    startUserAction,\n    getActiveUserAction,\n  };\n\n  return api;\n}\n\n/**\n * Adds an item to the buffer associated with the given UserAction.\n * The item will only be added if the UserAction is in the Started state.\n * @param userAction The UserAction instance\n * @param item The item to add to the buffer\n * @returns {boolean} True if the item was added, false otherwise\n */\nexport function addItemToUserActionBuffer(userAction: UserActionInterface | undefined, item: TransportItem): boolean {\n  if (!userAction) {\n    return false;\n  }\n  const state = (userAction as unknown as UserActionInternalInterface)?.getState();\n  if (state !== UserActionState.Started) {\n    return false;\n  }\n  (userAction as unknown as UserActionTransportItemBuffer).addItem(item);\n  return true;\n}\n", "import type { Patterns } from '../config/types';\nimport { isString } from '../utils/is';\n\nexport function shouldIgnoreEvent(patterns: Patterns, msg: string): boolean {\n  return patterns.some((pattern) => {\n    return isString(pattern) ? msg.includes(pattern) : !!msg.match(pattern);\n  });\n}\n", "import type { Config, Patterns } from '../../config';\nimport type { InternalLogger } from '../../internalLogger';\nimport type { Metas } from '../../metas';\nimport { TransportItemType } from '../../transports';\nimport type { TransportItem, Transports } from '../../transports';\nimport type { UnpatchedConsole } from '../../unpatchedConsole';\nimport {\n  deepEqual,\n  getCurrentTimestamp,\n  isArray,\n  isEmpty,\n  isError,\n  isNull,\n  isObject,\n  stringifyExternalJson,\n  stringifyObjectValues,\n} from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport type { TracesAPI } from '../traces';\nimport type { UserActionsAPI } from '../userActions';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\nimport { shouldIgnoreEvent } from '../utils';\n\nimport { defaultExceptionType } from './const';\nimport type { ErrorWithIndexProperties, ExceptionEvent, ExceptionsAPI, StacktraceParser } from './types';\n\nlet stacktraceParser: StacktraceParser | undefined;\n\nexport function initializeExceptionsAPI({\n  internalLogger,\n  config,\n  metas,\n  transports,\n  tracesApi,\n  userActionsApi,\n}: {\n  unpatchedConsole: UnpatchedConsole;\n  internalLogger: InternalLogger;\n  config: Config;\n  metas: Metas;\n  transports: Transports;\n  tracesApi: TracesAPI;\n  userActionsApi: UserActionsAPI;\n}): ExceptionsAPI {\n  internalLogger.debug('Initializing exceptions API');\n\n  let lastPayload: Pick<ExceptionEvent, 'type' | 'value' | 'stacktrace' | 'context'> | null = null;\n\n  stacktraceParser = config.parseStacktrace ?? stacktraceParser;\n\n  const changeStacktraceParser: ExceptionsAPI['changeStacktraceParser'] = (newStacktraceParser) => {\n    internalLogger.debug('Changing stacktrace parser');\n\n    stacktraceParser = newStacktraceParser ?? stacktraceParser;\n  };\n\n  const getStacktraceParser: ExceptionsAPI['getStacktraceParser'] = () => stacktraceParser;\n\n  const { ignoreErrors = [], preserveOriginalError } = config;\n\n  const pushError: ExceptionsAPI['pushError'] = (\n    error,\n    { skipDedupe, stackFrames, type, context, spanContext, timestampOverwriteMs, originalError } = {}\n  ) => {\n    if (isErrorIgnored(ignoreErrors, originalError ?? error)) {\n      return;\n    }\n    try {\n      const ctx = stringifyObjectValues({\n        ...parseCause(originalError ?? error),\n        ...(context ?? {}),\n      });\n\n      const item: TransportItem<ExceptionEvent<typeof preserveOriginalError>> = {\n        meta: metas.value,\n        payload: {\n          type: type || error.name || defaultExceptionType,\n          value: error.message,\n          timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n          trace: spanContext\n            ? {\n                trace_id: spanContext.traceId,\n                span_id: spanContext.spanId,\n              }\n            : tracesApi.getTraceContext(),\n          ...(isEmpty(ctx) ? {} : { context: ctx }),\n          ...(preserveOriginalError ? { originalError } : {}),\n        },\n        type: TransportItemType.EXCEPTION,\n      };\n\n      stackFrames = stackFrames ?? (error.stack ? stacktraceParser?.(error).frames : undefined);\n\n      if (stackFrames?.length) {\n        item.payload.stacktrace = {\n          frames: stackFrames,\n        };\n      }\n\n      const testingPayload = {\n        type: item.payload.type,\n        value: item.payload.value,\n        stackTrace: item.payload.stacktrace,\n        context: item.payload.context,\n      };\n\n      if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n        internalLogger.debug('Skipping error push because it is the same as the last one\\n', item.payload);\n\n        return;\n      }\n\n      lastPayload = testingPayload;\n\n      internalLogger.debug('Pushing exception\\n', item);\n\n      if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n        transports.execute(item);\n      }\n    } catch (err) {\n      internalLogger.error('Error pushing event', err);\n    }\n  };\n\n  changeStacktraceParser(config.parseStacktrace);\n\n  return {\n    changeStacktraceParser,\n    getStacktraceParser,\n    pushError,\n  };\n}\n\nfunction parseCause(error: ErrorWithIndexProperties): {} | { cause: string } {\n  let cause = error.cause;\n\n  if (isError(cause)) {\n    cause = error.cause.toString();\n    // typeof operator on null returns \"object\". This is a well-known quirk in JavaScript and is considered a bug that cannot be fixed due to backward compatibility issues.\n    // MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#typeof_null\n  } else if (cause !== null && (isObject(error.cause) || isArray(error.cause))) {\n    cause = stringifyExternalJson(error.cause);\n  } else if (cause != null) {\n    cause = error.cause.toString();\n  }\n\n  return cause == null ? {} : { cause };\n}\n\nfunction isErrorIgnored(ignoreErrors: Patterns, error: ErrorWithIndexProperties): boolean {\n  const { message, name, stack } = error;\n  return shouldIgnoreEvent(ignoreErrors, message + ' ' + name + ' ' + stack);\n}\n", "import { UAParser } from 'ua-parser-js';\n\nimport { unknownString } from '@grafana/faro-core';\nimport type { Meta, MetaBrowser, MetaItem } from '@grafana/faro-core';\n\nexport const browserMeta: MetaItem<Pick<Meta, 'browser'>> = () => {\n  const parser = new UAParser();\n  const { name, version } = parser.getBrowser();\n  const { name: osName, version: osVersion } = parser.getOS();\n  const userAgent = parser.getUA();\n  const language = navigator.language;\n  const mobile = navigator.userAgent.includes('Mobi');\n  const brands = getBrands();\n\n  return {\n    browser: {\n      name: name ?? unknownString,\n      version: version ?? unknownString,\n      os: `${osName ?? unknownString} ${osVersion ?? unknownString}`,\n      userAgent: userAgent ?? unknownString,\n      language: language ?? unknownString,\n      mobile,\n      brands: brands ?? unknownString,\n      viewportWidth: `${window.innerWidth}`,\n      viewportHeight: `${window.innerHeight}`,\n    },\n  };\n\n  function getBrands(): MetaBrowser['brands'] | undefined {\n    if (!name || !version) {\n      return undefined;\n    }\n\n    if ('userAgentData' in navigator && navigator.userAgentData) {\n      // userAgentData in experimental (only Chrome supports it) thus TS does not ship the respective type declarations\n      return (navigator as any).userAgentData.brands;\n    }\n\n    return undefined;\n  }\n};\n", "import { faro, genShortID } from '@grafana/faro-core';\nimport type { MetaSession } from '@grafana/faro-core';\n\nexport function createSession(attributes?: MetaSession['attributes']): MetaSession {\n  return {\n    id: faro.config?.sessionTracking?.generateSessionId?.() ?? genShortID(),\n    attributes,\n  };\n}\n", "export const newLineString = '\\n';\nexport const evalString = 'eval';\nexport const unknownSymbolString = '?';\nexport const atString = '@';\n\nexport const webkitLineRegex =\n  /^\\s*at (?:(?![a-z]+:\\/\\/)([^(]+?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nexport const webkitEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nexport const webkitEvalString = 'eval';\nexport const webkitAddressAtString = 'address at ';\nexport const webkitAddressAtStringLength = webkitAddressAtString.length;\n\nexport const firefoxLineRegex =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nexport const firefoxEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nexport const firefoxEvalString = ' > eval';\n\nexport const safariExtensionString = 'safari-extension';\nexport const safariWebExtensionString = 'safari-web-extension';\n\nexport const reactMinifiedRegex = /Minified React error #\\d+;/i;\n", "import type { ExceptionStackFrame } from '@grafana/faro-core';\n\nimport { unknownSymbolString } from './const';\n\nexport function buildStackFrame(\n  filename: string | undefined,\n  func: string | undefined,\n  lineno: number | undefined,\n  colno: number | undefined\n): ExceptionStackFrame {\n  const stackFrame: ExceptionStackFrame = {\n    filename: filename || document.location.href,\n    function: func || unknownSymbolString,\n  };\n\n  if (lineno !== undefined) {\n    stackFrame.lineno = lineno;\n  }\n\n  if (colno !== undefined) {\n    stackFrame.colno = colno;\n  }\n\n  return stackFrame;\n}\n", "import { atString, safariExtensionString, safariWebExtensionString } from './const';\n\nexport function getDataFromSafariExtensions(\n  func: string | undefined,\n  filename: string | undefined\n): [string | undefined, string | undefined] {\n  const isSafariExtension = func?.includes(safariExtensionString);\n  const isSafariWebExtension = !isSafariExtension && func?.includes(safariWebExtensionString);\n\n  if (!isSafariExtension && !isSafariWebExtension) {\n    return [func, filename];\n  }\n\n  return [\n    func?.includes(atString) ? func.split(atString)[0] : func,\n    isSafariExtension ? `${safariExtensionString}:${filename}` : `${safariWebExtensionString}:${filename}`,\n  ];\n}\n", "import { isNumber } from '@grafana/faro-core';\nimport type { ExceptionStackFrame, ExtendedError } from '@grafana/faro-core';\n\nimport { buildStackFrame } from './buildStackFrame';\nimport {\n  evalString,\n  firefoxEvalRegex,\n  firefoxEvalString,\n  firefoxLineRegex,\n  newLineString,\n  reactMinifiedRegex,\n  webkitAddressAtString,\n  webkitAddressAtStringLength,\n  webkitEvalRegex,\n  webkitEvalString,\n  webkitLineRegex,\n} from './const';\nimport { getDataFromSafariExtensions } from './getDataFromSafariExtensions';\n\nexport function getStackFramesFromError(error: ExtendedError): ExceptionStackFrame[] {\n  let lines: string[] = [];\n\n  if (error.stacktrace) {\n    lines = error.stacktrace.split(newLineString).filter((_line, idx) => idx % 2 === 0);\n  } else if (error.stack) {\n    lines = error.stack.split(newLineString);\n  }\n\n  const stackFrames = lines.reduce((acc, line, idx) => {\n    let parts: RegExpExecArray | null;\n    let func: string | undefined;\n    let filename: string | undefined;\n    let lineno: string | undefined;\n    let colno: string | undefined;\n\n    if ((parts = webkitLineRegex.exec(line))) {\n      func = parts[1];\n      filename = parts[2];\n      lineno = parts[3];\n      colno = parts[4];\n\n      if (filename?.startsWith(webkitEvalString)) {\n        const submatch = webkitEvalRegex.exec(filename);\n\n        if (submatch) {\n          filename = submatch[1];\n          lineno = submatch[2];\n          colno = submatch[3];\n        }\n      }\n\n      filename = filename?.startsWith(webkitAddressAtString)\n        ? filename.substring(webkitAddressAtStringLength)\n        : filename;\n      [func, filename] = getDataFromSafariExtensions(func, filename);\n    } else if ((parts = firefoxLineRegex.exec(line))) {\n      func = parts[1];\n      filename = parts[3];\n      lineno = parts[4];\n      colno = parts[5];\n\n      if (!!filename && filename.includes(firefoxEvalString)) {\n        const submatch = firefoxEvalRegex.exec(filename);\n\n        if (submatch) {\n          func = func || evalString;\n          filename = submatch[1];\n          lineno = submatch[2];\n        }\n      } else if (idx === 0 && !colno && isNumber(error.columnNumber)) {\n        colno = String(error.columnNumber! + 1);\n      }\n\n      [func, filename] = getDataFromSafariExtensions(func, filename);\n    }\n\n    if (filename || func) {\n      acc.push(buildStackFrame(filename, func, lineno ? Number(lineno) : undefined, colno ? Number(colno) : undefined));\n    }\n\n    return acc;\n  }, [] as ExceptionStackFrame[]);\n\n  if (reactMinifiedRegex.test(error.message)) {\n    return stackFrames.slice(1);\n  }\n\n  return stackFrames;\n}\n", "import type { ExtendedError, Stacktrace } from '@grafana/faro-core';\n\nimport { getStackFramesFromError } from './getStackFramesFromError';\n\nexport function parseStacktrace(error: ExtendedError): Stacktrace {\n  return {\n    frames: getStackFramesFromError(error),\n  };\n}\n", "export const primitiveUnhandledValue = 'Non-Error promise rejection captured with value:';\nexport const primitiveUnhandledType = 'UnhandledRejection';\n\nexport const domErrorType = 'DOMError';\nexport const domExceptionType = 'DOMException';\n\nexport const objectEventValue = 'Non-Error exception captured with keys:';\n\nexport const unknownSymbolString = '?';\n\nexport const valueTypeRegex =\n  /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n", "import { defaultExceptionType } from '@grafana/faro-core';\n\nimport { valueTypeRegex } from './const';\n\nexport function getValueAndTypeFromMessage(message: string): [string, string] {\n  const groups = message.match(valueTypeRegex);\n\n  const type = groups?.[1] ?? defaultExceptionType;\n  const value = groups?.[2] ?? message;\n\n  return [value, type];\n}\n", "import { isDomError, isDomException, isError, isErrorEvent, isEvent, isObject, isString } from '@grafana/faro-core';\nimport type { ExceptionStackFrame, LogArgsSerializer } from '@grafana/faro-core';\n\nimport { domErrorType, domExceptionType, objectEventValue, unknownSymbolString } from './const';\nimport { getValueAndTypeFromMessage } from './getValueAndTypeFromMessage';\nimport { buildStackFrame, getStackFramesFromError } from './stackFrames';\nimport type { ErrorEvent } from './types';\n\nexport function getErrorDetails(evt: ErrorEvent): [string | undefined, string | undefined, ExceptionStackFrame[]] {\n  let value: string | undefined;\n  let type: string | undefined;\n  let stackFrames: ExceptionStackFrame[] = [];\n  let isDomErrorRes: boolean | undefined;\n  let isEventRes: boolean | undefined;\n\n  if (isErrorEvent(evt) && evt.error) {\n    value = evt.error.message;\n    type = evt.error.name;\n    stackFrames = getStackFramesFromError(evt.error);\n  } else if ((isDomErrorRes = isDomError(evt)) || isDomException(evt)) {\n    const { name, message } = evt;\n\n    type = name ?? (isDomErrorRes ? domErrorType : domExceptionType);\n    value = message ? `${type}: ${message}` : type;\n  } else if (isError(evt)) {\n    value = evt.message;\n    stackFrames = getStackFramesFromError(evt);\n  } else if (isObject(evt) || (isEventRes = isEvent(evt))) {\n    type = isEventRes ? evt.constructor.name : undefined;\n    value = `${objectEventValue} ${Object.keys(evt)}`;\n  }\n\n  return [value, type, stackFrames];\n}\n\nexport interface ErrorDetails {\n  value?: string;\n  type?: string;\n  stackFrames?: ExceptionStackFrame[];\n}\n\nexport function getDetailsFromErrorArgs(args: [any?, ...any[]]): ErrorDetails {\n  const [evt, source, lineno, colno, error] = args;\n\n  let value: string | undefined;\n  let type: string | undefined;\n  let stackFrames: ExceptionStackFrame[] = [];\n  const eventIsString = isString(evt);\n  const initialStackFrame = buildStackFrame(source, unknownSymbolString, lineno, colno);\n\n  if (error || !eventIsString) {\n    [value, type, stackFrames] = getErrorDetails((error ?? evt) as Error | Event);\n\n    if (stackFrames.length === 0) {\n      stackFrames = [initialStackFrame];\n    }\n  } else if (eventIsString) {\n    [value, type] = getValueAndTypeFromMessage(evt);\n    stackFrames = [initialStackFrame];\n  }\n\n  return { value, type, stackFrames };\n}\n\nexport function getDetailsFromConsoleErrorArgs(args: [any?, ...any[]], serializer: LogArgsSerializer): ErrorDetails {\n  if (isError(args[0])) {\n    return getDetailsFromErrorArgs(args);\n  } else {\n    return { value: serializer(args) };\n  }\n}\n", "import {\n  allLogLevels,\n  BaseInstrumentation,\n  defaultErrorArgsSerializer,\n  defaultLogArgsSerializer,\n  LogLevel,\n  VERSION,\n} from '@grafana/faro-core';\nimport type { LogArgsSerializer } from '@grafana/faro-core';\n\nimport { getDetailsFromConsoleErrorArgs } from '../errors/getErrorDetails';\n\nexport class ConsoleInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-console';\n  readonly version = VERSION;\n\n  static defaultDisabledLevels: LogLevel[] = [LogLevel.DEBUG, LogLevel.TRACE, LogLevel.LOG];\n  static consoleErrorPrefix = 'console.error: ';\n  private errorSerializer: LogArgsSerializer = defaultLogArgsSerializer;\n\n  initialize() {\n    const instrumentationOptions = this.config.consoleInstrumentation;\n\n    const serializeErrors = instrumentationOptions?.serializeErrors || !!instrumentationOptions?.errorSerializer;\n    this.errorSerializer = serializeErrors\n      ? (instrumentationOptions?.errorSerializer ?? defaultErrorArgsSerializer)\n      : defaultLogArgsSerializer;\n\n    allLogLevels\n      .filter(\n        (level) =>\n          !(instrumentationOptions?.disabledLevels ?? ConsoleInstrumentation.defaultDisabledLevels).includes(level)\n      )\n      .forEach((level) => {\n        /* eslint-disable-next-line no-console */\n        console[level] = (...args) => {\n          try {\n            if (level === LogLevel.ERROR && !instrumentationOptions?.consoleErrorAsLog) {\n              const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n\n              if (value && !type && !stackFrames) {\n                this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value));\n                return;\n              }\n\n              this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value), { type, stackFrames });\n            } else if (level === LogLevel.ERROR && instrumentationOptions?.consoleErrorAsLog) {\n              const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n\n              this.api.pushLog(value ? [ConsoleInstrumentation.consoleErrorPrefix + value] : args, {\n                level,\n                context: {\n                  value: value ?? '',\n                  type: type ?? '',\n                  stackFrames: stackFrames?.length ? defaultErrorArgsSerializer(stackFrames) : '',\n                },\n              });\n            } else {\n              this.api.pushLog(args, { level });\n            }\n          } catch (err) {\n            this.logError(err);\n          } finally {\n            this.unpatchedConsole[level](...args);\n          }\n        };\n      });\n  }\n}\n", "import type { API, PushErrorOptions } from '@grafana/faro-core';\n\nimport { getDetailsFromErrorArgs } from './getErrorDetails';\n\nexport function registerOnerror(api: API): void {\n  const oldOnerror = window.onerror;\n\n  window.onerror = (...args) => {\n    try {\n      const { value, type, stackFrames } = getDetailsFromErrorArgs(args);\n      const originalError = args[4];\n\n      if (value) {\n        const options: PushErrorOptions = { type, stackFrames };\n\n        if (originalError != null) {\n          options.originalError = originalError;\n        }\n\n        api.pushError(new Error(value), options);\n      }\n    } finally {\n      oldOnerror?.apply(window, args);\n    }\n  };\n}\n", "import { isPrimitive } from '@grafana/faro-core';\nimport type { API, ExceptionStackFrame } from '@grafana/faro-core';\n\nimport { primitiveUnhandledType, primitiveUnhandledValue } from './const';\nimport { getErrorDetails } from './getErrorDetails';\nimport type { ExtendedPromiseRejectionEvent } from './types';\n\nexport function registerOnunhandledrejection(api: API): void {\n  window.addEventListener('unhandledrejection', (evt: ExtendedPromiseRejectionEvent) => {\n    let error = evt;\n\n    if (error.reason) {\n      error = evt.reason;\n    } else if (evt.detail?.reason) {\n      error = evt.detail?.reason;\n    }\n\n    let value: string | undefined;\n    let type: string | undefined;\n    let stackFrames: ExceptionStackFrame[] = [];\n    if (isPrimitive(error)) {\n      value = `${primitiveUnhandledValue} ${String(error)}`;\n      type = primitiveUnhandledType;\n    } else {\n      [value, type, stackFrames] = getErrorDetails(error);\n    }\n\n    if (value) {\n      api.pushError(new Error(value), { type, stackFrames });\n    }\n  });\n}\n", "import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\n\nimport { registerOnerror } from './registerOnerror';\nimport { registerOnunhandledrejection } from './registerOnunhandledrejection';\n\nexport class ErrorsInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-errors';\n  readonly version = VERSION;\n\n  initialize(): void {\n    this.logDebug('Initializing');\n\n    registerOnerror(this.api);\n\n    registerOnunhandledrejection(this.api);\n  }\n}\n", "import { BaseInstrumentation, EVENT_VIEW_CHANGED, unknownString, VERSION } from '@grafana/faro-core';\nimport type { Meta, MetaView } from '@grafana/faro-core';\n\n// all this does is send VIEW_CHANGED event\nexport class ViewInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-view';\n  readonly version = VERSION;\n\n  // previously notified view, to ensure we don't send view changed\n  // event twice for the same view\n  private notifiedView: MetaView | undefined;\n\n  private sendViewChangedEvent(meta: Meta): void {\n    const view = meta.view;\n\n    if (view && view.name !== this.notifiedView?.name) {\n      this.api.pushEvent(\n        EVENT_VIEW_CHANGED,\n        {\n          fromView: this.notifiedView?.name ?? unknownString,\n          toView: view.name ?? unknownString,\n        },\n        undefined,\n        { skipDedupe: true }\n      );\n\n      this.notifiedView = view;\n    }\n  }\n\n  initialize() {\n    this.metas.addListener(this.sendViewChangedEvent.bind(this));\n  }\n}\n", "class t{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const e=()=>{const t=performance.getEntriesByType(\"navigation\")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},n=t=>{if(\"loading\"===document.readyState)return\"loading\";{const n=e();if(n){if(t<n.domInteractive)return\"loading\";if(0===n.domContentLoadedEventStart||t<n.domContentLoadedEventStart)return\"dom-interactive\";if(0===n.domComplete||t<n.domComplete)return\"dom-content-loaded\"}}return\"complete\"},o=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,\"\")},i=t=>{let e=\"\";try{for(;9!==t?.nodeType;){const n=t,i=n.id?\"#\"+n.id:[o(n),...Array.from(n.classList).sort()].join(\".\");if(e.length+i.length>99)return e||i;if(e=e?i+\">\"+e:i,n.id)break;t=n.parentNode}}catch{}return e},r=new WeakMap;function s(t,e){return r.get(t)||r.set(t,new e),r.get(t)}let a=-1;const c=()=>a,f=t=>{addEventListener(\"pageshow\",(e=>{e.persisted&&(a=e.timeStamp,t(e))}),!0)},u=(t,e,n,o)=>{let i,r;return s=>{e.value>=0&&(s||o)&&(r=e.value-(i??0),(r||void 0===i)&&(i=e.value,e.delta=r,e.rating=((t,e)=>t>e[1]?\"poor\":t>e[0]?\"needs-improvement\":\"good\")(e.value,n),t(e)))}},d=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},l=()=>{const t=e();return t?.activationStart??0},h=(t,n=-1)=>{const o=e();let i=\"navigate\";c()>=0?i=\"back-forward-cache\":o&&(document.prerendering||l()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":o.type&&(i=o.type.replace(/_/g,\"-\")));return{name:t,value:n,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},m=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const o=new PerformanceObserver((t=>{Promise.resolve().then((()=>{e(t.getEntries())}))}));return o.observe({type:t,buffered:!0,...n}),o}}catch{}},p=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let g=-1;const y=new Set,v=()=>\"hidden\"!==document.visibilityState||document.prerendering?1/0:0,b=t=>{if(\"hidden\"===document.visibilityState){if(\"visibilitychange\"===t.type)for(const t of y)t();isFinite(g)||(g=\"visibilitychange\"===t.type?t.timeStamp:0,removeEventListener(\"prerenderingchange\",b,!0))}},M=()=>{if(g<0){const t=l(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter((e=>\"hidden\"===e.name&&e.startTime>t))[0]?.startTime;g=e??v(),addEventListener(\"visibilitychange\",b,!0),addEventListener(\"prerenderingchange\",b,!0),f((()=>{setTimeout((()=>{g=v()}))}))}return{get firstHiddenTime(){return g},onHidden(t){y.add(t)}}},T=t=>{document.prerendering?addEventListener(\"prerenderingchange\",(()=>t()),!0):t()},E=[1800,3e3],D=(t,e={})=>{T((()=>{const n=M();let o,i=h(\"FCP\");const r=m(\"paint\",(t=>{for(const e of t)\"first-contentful-paint\"===e.name&&(r.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries.push(e),o(!0)))}));r&&(o=u(t,i,E,e.reportAllChanges),f((n=>{i=h(\"FCP\"),o=u(t,i,E,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))})))}))},L=[.1,.25],P=t=>t.find((t=>1===t.node?.nodeType))||t[0],S=(e,o={})=>{const r=s(o=Object.assign({},o),t),a=new WeakMap;r.t=t=>{if(t?.sources?.length){const e=P(t.sources),n=e?.node;if(n){const t=o.generateTarget?.(n)??i(n);a.set(e,t)}}};((e,n={})=>{const o=M();D(p((()=>{let i,r=h(\"CLS\",0);const a=s(n,t),c=t=>{for(const e of t)a.u(e);a.o>r.value&&(r.value=a.o,r.entries=a.i,i())},l=m(\"layout-shift\",c);l&&(i=u(e,r,L,n.reportAllChanges),o.onHidden((()=>{c(l.takeRecords()),i(!0)})),f((()=>{a.o=0,r=h(\"CLS\",0),i=u(e,r,L,n.reportAllChanges),d((()=>i()))})),setTimeout(i))})))})((t=>{const o=(t=>{let e={};if(t.entries.length){const o=t.entries.reduce(((t,e)=>t.value>e.value?t:e));if(o?.sources?.length){const t=P(o.sources);t&&(e={largestShiftTarget:a.get(t),largestShiftTime:o.startTime,largestShiftValue:o.value,largestShiftSource:t,largestShiftEntry:o,loadState:n(o.startTime)})}}return Object.assign(t,{attribution:e})})(t);e(o)}),o)},w=(t,o={})=>{D((o=>{const i=(t=>{let o={timeToFirstByte:0,firstByteToFCP:t.value,loadState:n(c())};if(t.entries.length){const i=e(),r=t.entries.at(-1);if(i){const e=i.activationStart||0,s=Math.max(0,i.responseStart-e);o={timeToFirstByte:s,firstByteToFCP:t.value-s,loadState:n(t.entries[0].startTime),navigationEntry:i,fcpEntry:r}}}return Object.assign(t,{attribution:o})})(o);t(i)}),o)};let _=0,F=1/0,k=0;const B=t=>{for(const e of t)e.interactionId&&(F=Math.min(F,e.interactionId),k=Math.max(k,e.interactionId),_=k?(k-F)/7+1:0)};let C;const O=()=>C?_:performance.interactionCount??0,j=()=>{\"interactionCount\"in performance||C||(C=m(\"event\",B,{type:\"event\",buffered:!0,durationThreshold:0}))};let I=0;class A{l=[];h=new Map;m;p;v(){I=O(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((O()-I)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&\"first-input\"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort(((t,e)=>e.T-t.T)),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const W=t=>{const e=globalThis.requestIdleCallback||setTimeout;\"hidden\"===document.visibilityState?t():(t=p(t),addEventListener(\"visibilitychange\",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener(\"visibilitychange\",t,{capture:!0})})))},q=[200,500],x=(t,e={})=>{const o=s(e=Object.assign({},e),A);let r=[],a=[],c=0;const d=new WeakMap,l=new WeakMap;let p=!1;const g=()=>{p||(W(y),p=!0)},y=()=>{const t=o.l.map((t=>d.get(t.entries[0]))),e=a.length-50;a=a.filter(((n,o)=>o>=e||t.includes(n)));const n=new Set;for(const t of a){const e=v(t.startTime,t.processingEnd);for(const t of e)n.add(t)}const i=r.length-1-50;r=r.filter(((t,e)=>t.startTime>c&&e>i||n.has(t))),p=!1};o.m=t=>{const e=t.startTime+t.duration;let n;c=Math.max(c,t.processingEnd);for(let o=a.length-1;o>=0;o--){const i=a[o];if(Math.abs(e-i.renderTime)<=8){n=i,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},a.push(n)),(t.interactionId||\"first-input\"===t.entryType)&&d.set(t,n),g()},o.p=t=>{if(!l.get(t)){const n=t.entries[0].target;if(n){const o=e.generateTarget?.(n)??i(n);l.set(t,o)}}};const v=(t,e)=>{const n=[];for(const o of r)if(!(o.startTime+o.duration<t)){if(o.startTime>e)break;n.push(o)}return n},b=t=>{const e=t.entries[0],i=d.get(e),r=e.processingStart,s=Math.max(e.startTime+e.duration,r),a=Math.min(i.processingEnd,s),c=i.entries.sort(((t,e)=>t.processingStart-e.processingStart)),f=v(e.startTime,a),u=o.h.get(e.interactionId),h={interactionTarget:l.get(u),interactionType:e.name.startsWith(\"key\")?\"keyboard\":\"pointer\",interactionTime:e.startTime,nextPaintTime:s,processedEventEntries:c,longAnimationFrameEntries:f,inputDelay:r-e.startTime,processingDuration:a-r,presentationDelay:s-a,loadState:n(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,o=t.processingDuration;let i,r,s=0,a=0,c=0,f=0;for(const c of t.longAnimationFrameEntries){a=a+c.startTime+c.duration-c.styleAndLayoutStart;for(const t of c.scripts){const c=t.startTime+t.duration;if(c<e)continue;const u=c-Math.max(e,t.startTime),d=t.duration?u/t.duration*t.forcedStyleAndLayoutDuration:0;s+=u-d,a+=d,u>f&&(r=t.startTime<e+n?\"input-delay\":t.startTime>=e+n+o?\"presentation-delay\":\"processing-duration\",i=t,f=u)}}const u=t.longAnimationFrameEntries.at(-1),d=u?u.startTime+u.duration:0;d>=e+n+o&&(c=t.nextPaintTime-d),i&&r&&(t.longestScript={entry:i,subpart:r,intersectingDuration:f}),t.totalScriptDuration=s,t.totalStyleAndLayoutDuration=a,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-s-a-c})(h);return Object.assign(t,{attribution:h})};m(\"long-animation-frame\",(t=>{r=r.concat(t),g()})),((t,e={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;const n=M();T((()=>{j();let o,i=h(\"INP\");const r=s(e,A),a=t=>{W((()=>{for(const e of t)r.u(e);const e=r.M();e&&e.T!==i.value&&(i.value=e.T,i.entries=e.entries,o())}))},c=m(\"event\",a,{durationThreshold:e.durationThreshold??40});o=u(t,i,q,e.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),n.onHidden((()=>{a(c.takeRecords()),o(!0)})),f((()=>{r.v(),i=h(\"INP\"),o=u(t,i,q,e.reportAllChanges)})))}))})((e=>{const n=b(e);t(n)}),e)};class N{m;u(t){this.m?.(t)}}const H=[2500,4e3],R=(t,n={})=>{const o=s(n=Object.assign({},n),N),r=new WeakMap;o.m=t=>{const e=t.element;if(e){const o=n.generateTarget?.(e)??i(e);r.set(t,o)}};((t,e={})=>{T((()=>{const n=M();let o,i=h(\"LCP\");const r=s(e,N),a=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)r.u(e),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries=[e],o())},c=m(\"largest-contentful-paint\",a);if(c){o=u(t,i,H,e.reportAllChanges);const n=p((()=>{a(c.takeRecords()),c.disconnect(),o(!0)})),r=t=>{t.isTrusted&&(W(n),removeEventListener(t.type,r,{capture:!0}))};for(const t of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(t,r,{capture:!0});f((n=>{i=h(\"LCP\"),o=u(t,i,H,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))}))}}))})((n=>{const o=(t=>{let n={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const o=e();if(o){const e=o.activationStart||0,i=t.entries.at(-1),s=i.url&&performance.getEntriesByType(\"resource\").filter((t=>t.name===i.url))[0],a=Math.max(0,o.responseStart-e),c=Math.max(a,s?(s.requestStart||s.startTime)-e:0),f=Math.min(t.value,Math.max(c,s?s.responseEnd-e:0));n={target:r.get(i),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:f-c,elementRenderDelay:t.value-f,navigationEntry:o,lcpEntry:i},i.url&&(n.url=i.url),s&&(n.lcpResourceEntry=s)}}return Object.assign(t,{attribution:n})})(n);t(o)}),n)},U=[800,1800],V=t=>{document.prerendering?T((()=>V(t))):\"complete\"!==document.readyState?addEventListener(\"load\",(()=>V(t)),!0):setTimeout(t)},$=(t,n={})=>{((t,n={})=>{let o=h(\"TTFB\"),i=u(t,o,U,n.reportAllChanges);V((()=>{const r=e();r&&(o.value=Math.max(r.responseStart-l(),0),o.entries=[r],i(!0),f((()=>{o=h(\"TTFB\",0),i=u(t,o,U,n.reportAllChanges),i(!0)})))}))})((e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],o=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-o,0),r=Math.max(n.domainLookupStart-o,0),s=Math.max(n.connectStart-o,0),a=Math.max(n.connectEnd-o,0);e={waitingDuration:i,cacheDuration:r-i,dnsDuration:s-r,connectionDuration:a-s,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)}),n)};export{L as CLSThresholds,E as FCPThresholds,q as INPThresholds,H as LCPThresholds,U as TTFBThresholds,S as onCLS,w as onFCP,x as onINP,R as onLCP,$ as onTTFB};\n", "import { faro } from '@grafana/faro-core';\n\nexport const webStorageType = {\n  session: 'sessionStorage',\n  local: 'localStorage',\n} as const;\n\ntype StorageMechanism = (typeof webStorageType)[keyof typeof webStorageType];\n\n/**\n * Check if selected web storage mechanism is available.\n * @param type storage mechanism to test availability for.\n * @returns\n */\nexport function isWebStorageAvailable(type: StorageMechanism): boolean {\n  try {\n    let storage;\n    storage = window[type];\n\n    const testItem = '__faro_storage_test__';\n    storage.setItem(testItem, testItem);\n    storage.removeItem(testItem);\n    return true;\n  } catch (error) {\n    // the above can throw\n    faro.internalLogger?.info(`Web storage of type ${type} is not available. Reason: ${error}`);\n    return false;\n  }\n}\n\n/**\n * Get item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function getItem(key: string, webStorageMechanism: StorageMechanism): string | null {\n  if (isWebStorageTypeAvailable(webStorageMechanism)) {\n    return window[webStorageMechanism].getItem(key);\n  }\n\n  return null;\n}\n\n/**\n * Store item in SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param value: the item data.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function setItem(key: string, value: string, webStorageMechanism: StorageMechanism): void {\n  if (isWebStorageTypeAvailable(webStorageMechanism)) {\n    try {\n      window[webStorageMechanism].setItem(key, value);\n    } catch (_error) {\n      // do nothing\n    }\n  }\n}\n\n/**\n * Remove item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function removeItem(key: string, webStorageMechanism: StorageMechanism): void {\n  if (isWebStorageTypeAvailable(webStorageMechanism)) {\n    window[webStorageMechanism].removeItem(key);\n  }\n}\n\nexport const isLocalStorageAvailable = isWebStorageAvailable(webStorageType.local);\nexport const isSessionStorageAvailable = isWebStorageAvailable(webStorageType.session);\n\nfunction isWebStorageTypeAvailable(webStorageMechanism: StorageMechanism) {\n  if (webStorageMechanism === webStorageType.local) {\n    return isLocalStorageAvailable;\n  }\n\n  if (webStorageMechanism === webStorageType.session) {\n    return isSessionStorageAvailable;\n  }\n\n  return false;\n}\n", "/**\n * Tail based throttle which caches the args of the last call and updates\n */\nexport function throttle<T extends (...args: any[]) => void>(callback: T, delay: number) {\n  let pause = false;\n  let lastPending: Parameters<T> | null;\n\n  const timeoutBehavior = () => {\n    if (lastPending == null) {\n      pause = false;\n      return;\n    }\n\n    callback(...lastPending);\n    lastPending = null;\n    setTimeout(timeoutBehavior, delay);\n  };\n\n  return (...args: Parameters<T>) => {\n    if (pause) {\n      lastPending = args;\n      return;\n    }\n\n    callback(...args);\n    pause = true;\n    setTimeout(timeoutBehavior, delay);\n  };\n}\n", "import { faro, isEmpty, isFunction, isString } from '@grafana/faro-core';\nimport type { Patterns, Transport } from '@grafana/faro-core';\n\n/**\n * Retrieves a list of URLs to be ignored by aggregating the ignore URLs from all transports.\n *\n * @returns {string[]} An array of URLs to be ignored.\n */\nexport function getIgnoreUrls(): Patterns {\n  return faro.transports.transports.flatMap((transport: Transport) => transport.getIgnoreUrls());\n}\n\n/**\n * Checks if the given URL should be ignored based on a list of ignored URLs.\n *\n * @param url - The URL to check.\n * @returns `true` if the URL is in the list of ignored URLs, `false` otherwise.\n */\nexport function isUrlIgnored(url = ''): boolean {\n  return getIgnoreUrls().some((ignoredUrl) => url && url.match(ignoredUrl) != null);\n}\n\n/**\n * Extracts a URL string from the given resource.\n *\n * @param resource - The input resource which can be a string, a URL object, or an object with a `toString` method.\n * @returns The URL as a string if the resource is a valid URL-like object, or `undefined` if the resource is not valid.\n *\n */\nexport function getUrlFromResource(resource: any): string | undefined {\n  if (isString(resource)) {\n    return resource;\n  }\n\n  if (resource instanceof URL) {\n    return resource.href;\n  }\n\n  if (!isEmpty(resource) && isFunction(resource?.toString)) {\n    return resource.toString();\n  }\n\n  return undefined;\n}\n", "export const NAVIGATION_ID_STORAGE_KEY = 'com.grafana.faro.lastNavigationId';\n", "import { onCLS, onFCP, onINP, onLCP, onTTFB } from 'web-vitals/attribution';\nimport type { Metric } from 'web-vitals/attribution';\n\nimport { unknownString } from '@grafana/faro-core';\nimport type { Config, MeasurementEvent, MeasurementsAPI, PushMeasurementOptions } from '@grafana/faro-core';\n\nimport { getItem, webStorageType } from '../../utils';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\n\ntype Values = MeasurementEvent['values'];\ntype Context = Required<PushMeasurementOptions>['context'];\n\n// duplicate keys saved in variables to save bundle size\n// refs: https://github.com/grafana/faro-web-sdk/pull/595#discussion_r1615833968\nconst loadStateKey = 'load_state';\nconst timeToFirstByteKey = 'time_to_first_byte';\n\nexport class WebVitalsWithAttribution {\n  constructor(\n    private corePushMeasurement: MeasurementsAPI['pushMeasurement'],\n    private webVitalConfig?: Config['webVitalsInstrumentation']\n  ) {}\n\n  initialize(): void {\n    this.measureCLS();\n    this.measureFCP();\n    this.measureINP();\n    this.measureLCP();\n    this.measureTTFB();\n  }\n\n  private measureCLS(): void {\n    onCLS(\n      (metric) => {\n        const { loadState, largestShiftValue, largestShiftTime, largestShiftTarget } = metric.attribution;\n\n        const values = this.buildInitialValues(metric);\n        this.addIfPresent(values, 'largest_shift_value', largestShiftValue);\n        this.addIfPresent(values, 'largest_shift_time', largestShiftTime);\n\n        const context = this.buildInitialContext(metric);\n        this.addIfPresent(context, loadStateKey, loadState);\n        this.addIfPresent(context, 'largest_shift_target', largestShiftTarget);\n\n        this.pushMeasurement(values, context);\n      },\n      { reportAllChanges: this.webVitalConfig?.reportAllChanges }\n    );\n  }\n\n  private measureFCP(): void {\n    onFCP(\n      (metric) => {\n        const { firstByteToFCP, timeToFirstByte, loadState } = metric.attribution;\n\n        const values = this.buildInitialValues(metric);\n        this.addIfPresent(values, 'first_byte_to_fcp', firstByteToFCP);\n        this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n\n        const context = this.buildInitialContext(metric);\n        this.addIfPresent(context, loadStateKey, loadState);\n\n        this.pushMeasurement(values, context);\n      },\n      { reportAllChanges: this.webVitalConfig?.reportAllChanges }\n    );\n  }\n\n  private measureINP(): void {\n    onINP(\n      (metric) => {\n        const {\n          interactionTime,\n          presentationDelay,\n          inputDelay,\n          processingDuration,\n          nextPaintTime,\n          loadState,\n          interactionTarget,\n          interactionType,\n        } = metric.attribution;\n\n        const values = this.buildInitialValues(metric);\n        this.addIfPresent(values, 'interaction_time', interactionTime);\n        this.addIfPresent(values, 'presentation_delay', presentationDelay);\n        this.addIfPresent(values, 'input_delay', inputDelay);\n        this.addIfPresent(values, 'processing_duration', processingDuration);\n        this.addIfPresent(values, 'next_paint_time', nextPaintTime);\n\n        const context = this.buildInitialContext(metric);\n        this.addIfPresent(context, loadStateKey, loadState);\n        this.addIfPresent(context, 'interaction_target', interactionTarget);\n        this.addIfPresent(context, 'interaction_type', interactionType);\n\n        this.pushMeasurement(values, context);\n      },\n      { reportAllChanges: this.webVitalConfig?.reportAllChanges }\n    );\n  }\n\n  private measureLCP(): void {\n    onLCP(\n      (metric) => {\n        const { elementRenderDelay, resourceLoadDelay, resourceLoadDuration, timeToFirstByte, target } =\n          metric.attribution;\n\n        const values = this.buildInitialValues(metric);\n        this.addIfPresent(values, 'element_render_delay', elementRenderDelay);\n        this.addIfPresent(values, 'resource_load_delay', resourceLoadDelay);\n        this.addIfPresent(values, 'resource_load_duration', resourceLoadDuration);\n        this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n\n        const context = this.buildInitialContext(metric);\n        this.addIfPresent(context, 'element', target);\n\n        this.pushMeasurement(values, context);\n      },\n      { reportAllChanges: this.webVitalConfig?.reportAllChanges }\n    );\n  }\n\n  private measureTTFB(): void {\n    onTTFB(\n      (metric) => {\n        const { dnsDuration, connectionDuration, requestDuration, waitingDuration, cacheDuration } = metric.attribution;\n\n        const values = this.buildInitialValues(metric);\n        this.addIfPresent(values, 'dns_duration', dnsDuration);\n        this.addIfPresent(values, 'connection_duration', connectionDuration);\n        this.addIfPresent(values, 'request_duration', requestDuration);\n        this.addIfPresent(values, 'waiting_duration', waitingDuration);\n        this.addIfPresent(values, 'cache_duration', cacheDuration);\n\n        const context = this.buildInitialContext(metric);\n\n        this.pushMeasurement(values, context);\n      },\n      { reportAllChanges: this.webVitalConfig?.reportAllChanges }\n    );\n  }\n\n  private buildInitialValues(metric: Metric): Values {\n    const indicator = metric.name.toLowerCase();\n    return {\n      [indicator]: metric.value,\n      delta: metric.delta,\n    };\n  }\n\n  private buildInitialContext(metric: Metric): Context {\n    const navigationEntryId = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session) ?? unknownString;\n\n    return {\n      id: metric.id,\n      rating: metric.rating,\n      navigation_type: metric.navigationType,\n      navigation_entry_id: navigationEntryId,\n    };\n  }\n\n  private pushMeasurement(values: Values, context: Context): void {\n    const type = 'web-vitals';\n    this.corePushMeasurement({ type, values }, { context });\n  }\n\n  private addIfPresent(source: Values | Context, key: string, metric?: number | string): void {\n    if (metric) {\n      source[key] = metric;\n    }\n  }\n}\n", "import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\n\nimport { WebVitalsWithAttribution } from './webVitalsWithAttribution';\n\nexport class WebVitalsInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-web-vitals';\n  readonly version = VERSION;\n\n  initialize(): void {\n    this.logDebug('Initializing');\n    const webVitals = new WebVitalsWithAttribution(this.api.pushMeasurement, this.config.webVitalsInstrumentation);\n    webVitals.initialize();\n  }\n}\n", "export const MESSAGE_TYPE_RESOURCE_ENTRY = 'resource-entry';\nexport const MESSAGE_TYPE_HTTP_REQUEST_START = 'http-request-start';\nexport const MESSAGE_TYPE_HTTP_REQUEST_END = 'http-request-end';\nexport const MESSAGE_TYPE_DOM_MUTATION = 'dom-mutation';\n", "export const userActionDataAttributeParsed = 'faroUserActionName';\nexport const userActionDataAttribute = 'data-faro-user-action-name';\n\nexport {\n  MESSAGE_TYPE_DOM_MUTATION,\n  MESSAGE_TYPE_HTTP_REQUEST_START,\n  MESSAGE_TYPE_HTTP_REQUEST_END,\n} from '../_internal/monitors/const';\n", "import { Observable } from '@grafana/faro-core';\n\nimport { MESSAGE_TYPE_DOM_MUTATION } from './const';\nimport type { DomMutationMessage } from './types';\n\nlet domMutationObservable: Observable<DomMutationMessage> | undefined;\nlet domMutationObserver: MutationObserver | undefined;\n\nexport function monitorDomMutations(): Observable<DomMutationMessage> {\n  if (!domMutationObservable) {\n    domMutationObservable = new Observable<DomMutationMessage>();\n  }\n\n  if (!domMutationObserver) {\n    domMutationObserver = new MutationObserver((_mutationsList, _observer) => {\n      domMutationObservable!.notify({ type: MESSAGE_TYPE_DOM_MUTATION });\n    });\n\n    domMutationObserver.observe(document, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n      characterData: true,\n    });\n  }\n\n  return domMutationObservable;\n}\n\n// Test-only utility to reset state between tests\nexport function __resetDomMutationMonitorForTests() {\n  if (domMutationObserver) {\n    domMutationObserver.disconnect();\n  }\n  domMutationObserver = undefined;\n  domMutationObservable = undefined;\n}\n", "import { genShortID, Observable } from '@grafana/faro-core';\n\nimport { getUrlFromResource, isUrlIgnored } from '../../../utils/url';\n\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './const';\nimport type { HttpRequestEndMessage, HttpRequestMessagePayload, HttpRequestStartMessage } from './types';\n\ntype RequestProps = HttpRequestMessagePayload;\n\nconst apiTypeFetch = 'fetch';\nconst apiTypeXhr = 'xhr';\n\n/**\n * Monitors if any http requests are in progress.\n */\nlet httpRequestObservable: Observable<HttpRequestStartMessage | HttpRequestEndMessage> | undefined;\nlet isInstrumented = false;\nlet originalXhrOpen: typeof XMLHttpRequest.prototype.open | undefined;\nlet originalFetchFn: typeof window.fetch | undefined;\n\nexport function monitorHttpRequests(): Observable<HttpRequestStartMessage | HttpRequestEndMessage> {\n  if (httpRequestObservable) {\n    return httpRequestObservable;\n  }\n\n  httpRequestObservable = new Observable<HttpRequestStartMessage | HttpRequestEndMessage>();\n\n  function emitStartMessage(requestProps: RequestProps) {\n    httpRequestObservable!.notify({\n      type: MESSAGE_TYPE_HTTP_REQUEST_START,\n      request: requestProps,\n    });\n  }\n\n  function emitEndMessage(requestProps: RequestProps) {\n    httpRequestObservable!.notify({\n      type: MESSAGE_TYPE_HTTP_REQUEST_END,\n      request: requestProps,\n    });\n  }\n\n  if (!isInstrumented) {\n    monitorFetch({\n      onRequestStart: emitStartMessage,\n      onRequestEnd: emitEndMessage,\n    });\n\n    monitorXhr({\n      onRequestStart: emitStartMessage,\n      onRequestEnd: emitEndMessage,\n    });\n\n    isInstrumented = true;\n  }\n\n  return httpRequestObservable;\n}\n\nfunction monitorXhr({\n  onRequestStart,\n  onRequestEnd,\n}: {\n  onRequestStart: (props: RequestProps) => void;\n  onRequestEnd: (props: RequestProps) => void;\n}) {\n  if (!originalXhrOpen) {\n    originalXhrOpen = XMLHttpRequest.prototype.open;\n  }\n\n  XMLHttpRequest.prototype.open = function () {\n    const url = arguments[1];\n    const isIgnoredUrl = isUrlIgnored(url);\n    const method = arguments[0];\n\n    const requestId = genShortID();\n\n    // request has started to load data.\n    this.addEventListener('loadstart', function () {\n      if (!isIgnoredUrl) {\n        onRequestStart({ url, method, requestId, apiType: apiTypeXhr });\n      }\n    });\n\n    // transaction completes successfully.\n    this.addEventListener('load', function () {\n      if (!isIgnoredUrl) {\n        onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n      }\n    });\n\n    this.addEventListener('error', function () {\n      if (!isIgnoredUrl) {\n        onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n      }\n    });\n\n    this.addEventListener('abort', function () {\n      if (!isIgnoredUrl) {\n        onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n      }\n    });\n    originalXhrOpen!.apply(this, arguments as any);\n  };\n}\n\nfunction monitorFetch({\n  onRequestEnd,\n  onRequestStart,\n}: {\n  onRequestStart: (props: RequestProps) => void;\n  onRequestEnd: (props: RequestProps) => void;\n}) {\n  if (!originalFetchFn) {\n    originalFetchFn = window.fetch;\n  }\n\n  window.fetch = function () {\n    const url = getUrlFromResource(arguments[0]) ?? '';\n    const isIgnoredUrl = isUrlIgnored(url);\n    const method = (arguments[1] ?? {}).method;\n\n    const requestId = genShortID();\n\n    if (!isIgnoredUrl) {\n      onRequestStart({ url, method, requestId, apiType: apiTypeFetch });\n    }\n\n    return originalFetchFn!\n      .apply(this, arguments as any)\n      .then((response) => {\n        if (!isIgnoredUrl) {\n          onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n        }\n        return response;\n      })\n      .catch((error) => {\n        if (!isIgnoredUrl) {\n          onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n        }\n        throw error;\n      });\n  };\n}\n\n// Test-only utility to reset instrumentation and singleton between tests\nexport function __resetHttpRequestMonitorForTests() {\n  if (originalXhrOpen) {\n    XMLHttpRequest.prototype.open = originalXhrOpen;\n  }\n  if (originalFetchFn) {\n    (window as any).fetch = originalFetchFn;\n  }\n  httpRequestObservable = undefined;\n  isInstrumented = false;\n  originalXhrOpen = undefined;\n  originalFetchFn = undefined;\n}\n", "export const NAVIGATION_ENTRY = 'navigation';\nexport const RESOURCE_ENTRY = 'resource';\n", "import { isArray, type PushEventOptions, unknownString } from '@grafana/faro-core';\n\nimport type { CacheType, FaroNavigationTiming, FaroResourceTiming } from './types';\n\nconst w3cTraceparentFormat = /^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;\n\ntype SpanContext = PushEventOptions['spanContext'];\n\n// Extract traceparent from serverTiming, if present\nexport function getSpanContextFromServerTiming(serverTimings: PerformanceServerTiming[] = []): SpanContext | undefined {\n  for (const serverEntry of serverTimings) {\n    if (serverEntry.name === 'traceparent') {\n      if (!w3cTraceparentFormat.test(serverEntry.description)) {\n        continue;\n      }\n\n      const [, traceId, spanId] = serverEntry.description.split('-');\n      if (traceId != null && spanId != null) {\n        return { traceId, spanId };\n      }\n\n      break;\n    }\n  }\n\n  return undefined;\n}\n\nexport function performanceObserverSupported(): boolean {\n  return 'PerformanceObserver' in window;\n}\n\nexport function onDocumentReady(handleReady: () => void) {\n  if (document.readyState === 'complete') {\n    handleReady();\n  } else {\n    const readyStateCompleteHandler = () => {\n      if (document.readyState === 'complete') {\n        handleReady();\n        document.removeEventListener('readystatechange', readyStateCompleteHandler);\n      }\n    };\n\n    document.addEventListener('readystatechange', readyStateCompleteHandler);\n  }\n}\n\ntype PerformanceEntryAllowProperties = Record<string, Array<string | number> | string | number>;\n\nexport function includePerformanceEntry(\n  performanceEntryJSON: Record<string, any>,\n  allowProps: PerformanceEntryAllowProperties = {}\n): boolean {\n  for (const [allowPropKey, allowPropValue] of Object.entries(allowProps)) {\n    const perfEntryPropVal = performanceEntryJSON[allowPropKey];\n\n    if (perfEntryPropVal == null) {\n      return false;\n    }\n\n    if (isArray(allowPropValue)) {\n      return allowPropValue.includes(perfEntryPropVal);\n    }\n\n    return perfEntryPropVal === allowPropValue;\n  }\n\n  // empty object allows all\n  return true;\n}\n\nexport function createFaroResourceTiming(resourceEntryRaw: PerformanceResourceTiming): FaroResourceTiming {\n  const {\n    connectEnd,\n    connectStart,\n    decodedBodySize,\n    domainLookupEnd,\n    domainLookupStart,\n    duration,\n    encodedBodySize,\n    fetchStart,\n    initiatorType,\n    name,\n    nextHopProtocol,\n    redirectEnd,\n    redirectStart,\n    // @ts-expect-error the renderBlockingStatus property is not available in all browsers\n    renderBlockingStatus: rbs,\n    requestStart,\n    responseEnd,\n    responseStart,\n    responseStatus,\n    secureConnectionStart,\n    transferSize,\n    workerStart,\n  } = resourceEntryRaw;\n\n  return {\n    name: name,\n    duration: toFaroPerformanceTimingString(duration),\n    tcpHandshakeTime: toFaroPerformanceTimingString(connectEnd - connectStart),\n    dnsLookupTime: toFaroPerformanceTimingString(domainLookupEnd - domainLookupStart),\n    tlsNegotiationTime: toFaroPerformanceTimingString(connectEnd - secureConnectionStart),\n    responseStatus: toFaroPerformanceTimingString(responseStatus),\n    redirectTime: toFaroPerformanceTimingString(redirectEnd - redirectStart),\n    requestTime: toFaroPerformanceTimingString(responseStart - requestStart),\n    responseTime: toFaroPerformanceTimingString(responseEnd - responseStart),\n    fetchTime: toFaroPerformanceTimingString(responseEnd - fetchStart),\n    serviceWorkerTime: toFaroPerformanceTimingString(fetchStart - workerStart),\n    decodedBodySize: toFaroPerformanceTimingString(decodedBodySize),\n    encodedBodySize: toFaroPerformanceTimingString(encodedBodySize),\n    cacheHitStatus: getCacheType(),\n    renderBlockingStatus: toFaroPerformanceTimingString(rbs) as FaroResourceTiming['renderBlockingStatus'],\n    protocol: nextHopProtocol,\n    initiatorType: initiatorType,\n    visibilityState: document.visibilityState,\n    ttfb: toFaroPerformanceTimingString(responseStart - requestStart),\n    transferSize: toFaroPerformanceTimingString(transferSize),\n\n    // TODO: add in future iteration, ideally after nested objects are supported by the collector.\n    // serverTiming: resourceEntryRaw.serverTiming,\n  };\n\n  function getCacheType(): CacheType {\n    let cacheType: CacheType = 'fullLoad';\n    if (transferSize === 0) {\n      if (decodedBodySize > 0) {\n        cacheType = 'cache';\n      }\n    } else {\n      if (responseStatus != null) {\n        if (responseStatus === 304) {\n          cacheType = 'conditionalFetch';\n        }\n      } else if (encodedBodySize > 0 && transferSize < encodedBodySize) {\n        cacheType = 'conditionalFetch';\n      }\n    }\n    return cacheType;\n  }\n}\n\nexport function createFaroNavigationTiming(navigationEntryRaw: PerformanceNavigationTiming): FaroNavigationTiming {\n  const {\n    activationStart,\n    domComplete,\n    domContentLoadedEventEnd,\n    domContentLoadedEventStart,\n    domInteractive,\n    fetchStart,\n    loadEventEnd,\n    loadEventStart,\n    responseStart,\n    type,\n  } = navigationEntryRaw;\n\n  const parserStart = getDocumentParsingTime();\n\n  return {\n    ...createFaroResourceTiming(navigationEntryRaw),\n    pageLoadTime: toFaroPerformanceTimingString(domComplete - fetchStart),\n    documentParsingTime: toFaroPerformanceTimingString(parserStart ? domInteractive - parserStart : null),\n    domProcessingTime: toFaroPerformanceTimingString(domComplete - domInteractive),\n    domContentLoadHandlerTime: toFaroPerformanceTimingString(domContentLoadedEventEnd - domContentLoadedEventStart),\n    onLoadTime: toFaroPerformanceTimingString(loadEventEnd - loadEventStart),\n\n    // For navigation entries we can calculate the TTFB based on activationStart. We overwrite the TTFB value coming with the resource entry.\n    // For more accuracy on prerendered pages page we calculate relative top the activationStart instead of the start of the navigation.\n    // clamp to 0 if activationStart occurs after first byte is received.\n    ttfb: toFaroPerformanceTimingString(Math.max(responseStart - (activationStart ?? 0), 0)),\n    type: type,\n  };\n}\n\nfunction getDocumentParsingTime(): number | null {\n  if (performance.timing?.domLoading != null) {\n    // the browser is about to start parsing the first received bytes of the HTML document.\n    // This property is deprecated but there isn't a really good alternative atm.\n    // For now we stick with domLoading and keep researching a better alternative.\n    return performance.timing.domLoading - performance.timeOrigin;\n  }\n\n  return null;\n}\n\nfunction toFaroPerformanceTimingString(v: unknown): string {\n  if (v == null) {\n    return unknownString;\n  }\n\n  if (typeof v === 'number') {\n    return Math.round(v > 0 ? v : 0).toString();\n  }\n\n  return v.toString();\n}\n", "import { genShortID, unknownString } from '@grafana/faro-core';\nimport type { EventsAPI, PushEventOptions } from '@grafana/faro-core';\n\nimport { getItem, setItem, webStorageType } from '../../utils';\nimport { isUrlIgnored } from '../../utils/url';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\n\nimport { NAVIGATION_ENTRY } from './performanceConstants';\nimport { createFaroNavigationTiming, getSpanContextFromServerTiming } from './performanceUtils';\nimport type { FaroNavigationItem } from './types';\n\ntype SpanContext = PushEventOptions['spanContext'];\n\nexport function getNavigationTimings(pushEvent: EventsAPI['pushEvent']): Promise<FaroNavigationItem> {\n  let faroNavigationEntryResolve: (value: FaroNavigationItem) => void;\n  const faroNavigationEntryPromise = new Promise<FaroNavigationItem>((resolve) => {\n    faroNavigationEntryResolve = resolve;\n  });\n\n  const observer = new PerformanceObserver((observedEntries) => {\n    const [navigationEntryRaw] = observedEntries.getEntries();\n\n    if (navigationEntryRaw == null || isUrlIgnored(navigationEntryRaw.name)) {\n      return;\n    }\n\n    const navEntryJson = navigationEntryRaw.toJSON();\n\n    let spanContext: SpanContext = getSpanContextFromServerTiming(navEntryJson?.serverTiming);\n\n    const faroPreviousNavigationId = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session) ?? unknownString;\n\n    const faroNavigationEntry: FaroNavigationItem = {\n      ...createFaroNavigationTiming(navEntryJson),\n      faroNavigationId: genShortID(),\n      faroPreviousNavigationId,\n    };\n\n    setItem(NAVIGATION_ID_STORAGE_KEY, faroNavigationEntry.faroNavigationId, webStorageType.session);\n\n    pushEvent('faro.performance.navigation', faroNavigationEntry, undefined, {\n      spanContext,\n      timestampOverwriteMs: performance.timeOrigin + navEntryJson.startTime,\n    });\n\n    faroNavigationEntryResolve(faroNavigationEntry);\n  });\n\n  observer.observe({\n    type: NAVIGATION_ENTRY,\n    buffered: true,\n  });\n\n  return faroNavigationEntryPromise;\n}\n", "import { faro, genShortID } from '@grafana/faro-core';\nimport type { EventsAPI, Observable, PushEventOptions } from '@grafana/faro-core';\n\nimport { isUrlIgnored } from '../../utils/url';\n\nimport { RESOURCE_ENTRY } from './performanceConstants';\nimport { createFaroResourceTiming, getSpanContextFromServerTiming, includePerformanceEntry } from './performanceUtils';\nimport type { ResourceEntryMessage } from './types';\n\ntype SpanContext = PushEventOptions['spanContext'];\n\nconst DEFAULT_TRACK_RESOURCES = { initiatorType: ['xmlhttprequest', 'fetch'] };\n\nexport function observeResourceTimings(\n  faroNavigationId: string,\n  pushEvent: EventsAPI['pushEvent'],\n  observable: Observable<ResourceEntryMessage>\n) {\n  const trackResources = faro.config.trackResources;\n\n  const observer = new PerformanceObserver((observedEntries) => {\n    const entries = observedEntries.getEntries();\n\n    for (const resourceEntryRaw of entries) {\n      if (isUrlIgnored(resourceEntryRaw.name)) {\n        continue;\n      }\n\n      observable?.notify({\n        type: RESOURCE_ENTRY,\n      });\n\n      const resourceEntryJson = resourceEntryRaw.toJSON();\n      let spanContext: SpanContext = getSpanContextFromServerTiming(resourceEntryJson?.serverTiming);\n\n      if (\n        (trackResources == null && includePerformanceEntry(resourceEntryJson, DEFAULT_TRACK_RESOURCES)) ||\n        trackResources\n      ) {\n        const faroResourceEntry = {\n          ...createFaroResourceTiming(resourceEntryJson),\n          faroNavigationId,\n          faroResourceId: genShortID(),\n        };\n\n        pushEvent('faro.performance.resource', faroResourceEntry, undefined, {\n          spanContext,\n          timestampOverwriteMs: performance.timeOrigin + resourceEntryJson.startTime,\n        });\n      }\n    }\n  });\n\n  observer.observe({\n    type: RESOURCE_ENTRY,\n    buffered: true,\n  });\n}\n", "import { BaseInstrumentation, Observable, VERSION } from '@grafana/faro-core';\n\nimport { getNavigationTimings } from './navigation';\nimport { onDocumentReady, performanceObserverSupported } from './performanceUtils';\nimport { observeResourceTimings } from './resource';\nimport type { ResourceEntryMessage } from './types';\n\nexport const performanceEntriesSubscription = new Observable<ResourceEntryMessage>();\n\nexport class PerformanceInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-performance';\n  readonly version = VERSION;\n\n  initialize() {\n    if (!performanceObserverSupported()) {\n      this.logDebug('performance observer not supported. Disable performance instrumentation.');\n      return;\n    }\n\n    onDocumentReady(async () => {\n      const pushEvent = this.api.pushEvent;\n\n      const { faroNavigationId } = await getNavigationTimings(pushEvent);\n\n      if (faroNavigationId != null) {\n        observeResourceTimings(faroNavigationId, pushEvent, performanceEntriesSubscription);\n      }\n    });\n  }\n}\n", "import { Observable } from '@grafana/faro-core';\nimport type { Subscription } from '@grafana/faro-core';\n\nimport { performanceEntriesSubscription } from '../../performance/instrumentation';\nimport { RESOURCE_ENTRY } from '../../performance/performanceConstants';\n\nimport { MESSAGE_TYPE_RESOURCE_ENTRY } from './const';\n\nlet performanceObservable: Observable | undefined;\nlet isSubscribed = false;\nlet subscription: Subscription | undefined;\n\nexport function monitorPerformanceEntries(): Observable {\n  if (!performanceObservable) {\n    performanceObservable = new Observable();\n  }\n\n  if (!isSubscribed) {\n    subscription = performanceEntriesSubscription.subscribe((data) => {\n      if (data.type === RESOURCE_ENTRY) {\n        performanceObservable!.notify({ type: MESSAGE_TYPE_RESOURCE_ENTRY });\n      }\n    });\n    isSubscribed = true;\n  }\n\n  return performanceObservable;\n}\n\n// Test-only utility to reset state between tests\nexport function __resetPerformanceEntriesMonitorForTests() {\n  if (subscription) {\n    subscription.unsubscribe();\n  }\n  subscription = undefined;\n  isSubscribed = false;\n  performanceObservable = undefined;\n}\n", "import type { HttpRequestEndMessage, HttpRequestStartMessage } from '../_internal/monitors/types';\n\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './const';\n\n/**\n * Parses the action attribute name by removing the 'data-' prefix and converting\n * the remaining string to camelCase.\n *\n * This is needed because the browser will remove the 'data-' prefix and the dashes from\n * data attributes and make then camelCase.\n */\nexport function convertDataAttributeName(userActionDataAttribute: string) {\n  const withoutData = userActionDataAttribute.split('data-')[1];\n  const withUpperCase = withoutData?.replace(/-(.)/g, (_, char) => char.toUpperCase());\n  return withUpperCase?.replace(/-/g, '');\n}\n\nexport function startTimeout(timeoutId: number | undefined, cb: () => void, delay: number) {\n  if (timeoutId) {\n    clearTimeout(timeoutId);\n  }\n\n  //@ts-expect-error for some reason vscode is using the node types\n  timeoutId = setTimeout(() => {\n    cb();\n  }, delay);\n\n  return timeoutId;\n}\n\nexport function isRequestStartMessage(msg: any): msg is HttpRequestStartMessage {\n  return msg.type === MESSAGE_TYPE_HTTP_REQUEST_START;\n}\n\nexport function isRequestEndMessage(msg: any): msg is HttpRequestEndMessage {\n  return msg.type === MESSAGE_TYPE_HTTP_REQUEST_END;\n}\n", "// packages/web-sdk/src/instrumentations/userActions/userActionController.ts\nimport { Observable, UserActionState } from '@grafana/faro-core';\nimport type { Subscription, UserActionInternalInterface } from '@grafana/faro-core';\n\nimport { monitorDomMutations } from '../_internal/monitors/domMutationMonitor';\nimport { monitorHttpRequests } from '../_internal/monitors/httpRequestMonitor';\nimport { monitorPerformanceEntries } from '../_internal/monitors/performanceEntriesMonitor';\nimport type { HttpRequestMessagePayload } from '../_internal/monitors/types';\n\nimport { isRequestEndMessage, isRequestStartMessage, startTimeout } from './util';\n\nconst defaultFollowUpActionTimeRange = 100;\nconst defaultHaltTimeout = 10 * 1000;\n\nexport class UserActionController {\n  private readonly http = monitorHttpRequests();\n  private readonly dom = monitorDomMutations();\n  private readonly perf = monitorPerformanceEntries();\n\n  private allMonitorsSub?: Subscription;\n  private stateSub?: Subscription;\n  private followUpTid?: number;\n  private haltTid?: number;\n\n  private isValid = false;\n  private runningRequests = new Map<string, HttpRequestMessagePayload>();\n\n  constructor(private userAction: UserActionInternalInterface) {}\n\n  attach(): void {\n    // Subscribe to monitors while action is active/halting\n    this.allMonitorsSub = new Observable()\n      .merge(this.http, this.dom, this.perf)\n      .takeWhile(() => [UserActionState.Started, UserActionState.Halted].includes(this.userAction.getState()))\n      .filter((msg) => {\n        // If the user action is in halt state, we only keep listening to ended http requests\n        if (\n          this.userAction.getState() === UserActionState.Halted &&\n          !(isRequestEndMessage(msg) && this.runningRequests.has(msg.request.requestId))\n        ) {\n          return false;\n        }\n\n        return true;\n      })\n      .subscribe((msg) => {\n        if (isRequestStartMessage(msg)) {\n          // An action is on halt if it has pending items, like pending HTTP requests.\n          // In this case we start a separate timeout to wait for the requests to finish\n          // If in the halt state, we stop adding Faro signals to the action's buffer (see userActionLifecycleHandler.ts)\n          // But we are still subscribed to\n          this.runningRequests.set(msg.request.requestId, msg.request);\n        }\n\n        if (isRequestEndMessage(msg)) {\n          this.runningRequests.delete(msg.request.requestId);\n        }\n\n        if (!isRequestEndMessage(msg)) {\n          if (!this.isValid) {\n            this.isValid = true;\n          }\n          this.scheduleFollowUp();\n        } else if (this.userAction.getState() === UserActionState.Halted && this.runningRequests.size === 0) {\n          this.endAction();\n        }\n      });\n\n    // When UA ends or cancels, cleanup timers/subscriptions\n    this.stateSub = (this.userAction as unknown as Observable)\n      .filter((s: UserActionState) => [UserActionState.Ended, UserActionState.Cancelled].includes(s))\n      .first()\n      .subscribe(() => this.cleanup());\n\n    // initial follow-up window in case nothing else happens\n    this.scheduleFollowUp();\n  }\n\n  private scheduleFollowUp() {\n    this.clearTimer(this.followUpTid);\n    this.followUpTid = setTimeout(() => {\n      // If action just started and there's pending work, go to halted\n      if (this.userAction.getState() === UserActionState.Started && this.runningRequests.size > 0) {\n        this.haltAction();\n        return;\n      }\n\n      // If we saw any relevant activity in the window, finish as ended\n      if (this.isValid) {\n        this.endAction();\n        return;\n      }\n\n      // Otherwise, no signals => cancel\n      this.cancelAction();\n    }, defaultFollowUpActionTimeRange) as any;\n  }\n\n  private haltAction() {\n    if (this.userAction.getState() !== UserActionState.Started) {\n      return;\n    }\n    this.userAction.halt();\n    this.startHaltTimeout();\n  }\n\n  private startHaltTimeout() {\n    this.clearTimer(this.haltTid);\n    this.haltTid = startTimeout(\n      this.haltTid,\n      () => {\n        // If still halted after timeout, end\n        if (this.userAction.getState() === UserActionState.Halted) {\n          this.endAction();\n        }\n      },\n      defaultHaltTimeout\n    ) as any;\n  }\n\n  private endAction() {\n    this.userAction.end();\n    this.cleanup();\n  }\n\n  private cancelAction() {\n    this.userAction.cancel();\n    this.cleanup();\n  }\n\n  private cleanup() {\n    this.clearTimer(this.followUpTid);\n    this.clearTimer(this.haltTid);\n    this.allMonitorsSub?.unsubscribe();\n    this.stateSub?.unsubscribe();\n    this.allMonitorsSub = undefined;\n    this.stateSub = undefined;\n    this.runningRequests.clear();\n  }\n\n  private clearTimer(id?: number) {\n    if (id) {\n      clearTimeout(id);\n    }\n  }\n}\n", "import type { Faro, Subscription, UserActionInterface, UserActionInternalInterface } from '@grafana/faro-core';\n\nimport { userActionDataAttributeParsed as userActionDataAttribute } from './const';\nimport { UserActionController } from './userActionController';\nimport { convertDataAttributeName } from './util';\n\nexport function getUserEventHandler(faro: Faro) {\n  const { api, config } = faro;\n\n  function processUserEvent(event: PointerEvent | KeyboardEvent) {\n    const userActionName = getUserActionNameFromElement(\n      event.target as HTMLElement,\n      config.userActionsInstrumentation?.dataAttributeName ?? userActionDataAttribute\n    );\n\n    // We don't have a data attribute\n    if (!userActionName) {\n      return;\n    }\n\n    const userAction = api.startUserAction(userActionName, {}, { triggerName: event.type });\n    if (userAction) {\n      processUserActionStarted(userAction);\n    }\n  }\n\n  function processUserActionStarted(userAction: UserActionInterface) {\n    const internalUserAction = userAction as unknown as UserActionInternalInterface;\n    new UserActionController(internalUserAction).attach();\n  }\n\n  return { processUserEvent, processUserActionStarted };\n}\n\nexport function getUserActionNameFromElement(element: HTMLElement, dataAttributeName: string): string | undefined {\n  const parsedDataAttributeName = convertDataAttributeName(dataAttributeName);\n  const dataset = element.dataset;\n\n  for (const key in dataset) {\n    if (key === parsedDataAttributeName) {\n      return dataset[key];\n    }\n  }\n\n  return undefined;\n}\n\nexport function unsubscribeAllMonitors(allMonitorsSub: Subscription | undefined) {\n  allMonitorsSub?.unsubscribe();\n  allMonitorsSub = undefined;\n}\n", "import { BaseInstrumentation, faro, type Subscription, userActionsMessageBus, VERSION } from '@grafana/faro-core';\n\nimport { getUserEventHandler } from './processUserActionEventHandler';\n\nexport class UserActionInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-user-action';\n  readonly version = VERSION;\n\n  private _userActionSub?: Subscription;\n\n  initialize(): void {\n    const { processUserEvent, processUserActionStarted } = getUserEventHandler(faro);\n    window.addEventListener('pointerdown', processUserEvent);\n    window.addEventListener('keydown', (ev: KeyboardEvent) => {\n      if ([' ', 'Enter'].includes(ev.key)) {\n        processUserEvent(ev);\n      }\n    });\n\n    this._userActionSub = userActionsMessageBus.subscribe(({ type, userAction }) => {\n      if (type === 'user_action_start') {\n        processUserActionStarted(userAction);\n      }\n    });\n  }\n\n  destroy() {\n    this._userActionSub?.unsubscribe();\n  }\n}\n", "import type { Config } from '@grafana/faro-core';\n\nexport const STORAGE_KEY = 'com.grafana.faro.session';\nexport const SESSION_EXPIRATION_TIME = 4 * 60 * 60 * 1000; // hrs\nexport const SESSION_INACTIVITY_TIME = 15 * 60 * 1000; // minutes\nexport const STORAGE_UPDATE_DELAY = 1 * 1000; // seconds\n\nexport const MAX_SESSION_PERSISTENCE_TIME = SESSION_INACTIVITY_TIME;\n\nexport const defaultSessionTrackingConfig: Config['sessionTracking'] = {\n  enabled: true,\n  persistent: false,\n  maxSessionPersistenceTime: MAX_SESSION_PERSISTENCE_TIME,\n} as const;\n", "import { faro } from '@grafana/faro-core';\n\nexport function isSampled(): boolean {\n  const sendAllSignals = 1;\n  const sessionTracking = faro.config.sessionTracking;\n  let samplingRate =\n    sessionTracking?.sampler?.({ metas: faro.metas.value }) ?? sessionTracking?.samplingRate ?? sendAllSignals;\n\n  if (typeof samplingRate !== 'number') {\n    const sendNoSignals = 0;\n    samplingRate = sendNoSignals;\n  }\n\n  return Math.random() < samplingRate;\n}\n", "import { dateNow, deepEqual, EVENT_OVERRIDES_SERVICE_NAME, faro, genShortID, isEmpty } from '@grafana/faro-core';\nimport type { Meta, MetaOverrides } from '@grafana/faro-core';\n\nimport { isLocalStorageAvailable, isSessionStorageAvailable } from '../../../utils';\n\nimport { isSampled } from './sampling';\nimport { SESSION_EXPIRATION_TIME, SESSION_INACTIVITY_TIME } from './sessionConstants';\nimport type { FaroUserSession } from './types';\n\ntype CreateUserSessionObjectParams = {\n  sessionId?: string;\n  started?: number;\n  lastActivity?: number;\n  isSampled?: boolean;\n};\n\nexport function createUserSessionObject({\n  sessionId,\n  started,\n  lastActivity,\n  isSampled = true,\n}: CreateUserSessionObjectParams = {}): FaroUserSession {\n  const now = dateNow();\n\n  const generateSessionId = faro.config?.sessionTracking?.generateSessionId;\n\n  if (sessionId == null) {\n    sessionId = typeof generateSessionId === 'function' ? generateSessionId() : genShortID();\n  }\n\n  return {\n    sessionId,\n    lastActivity: lastActivity ?? now,\n    started: started ?? now,\n    isSampled: isSampled,\n  };\n}\n\nexport function isUserSessionValid(session: FaroUserSession | null): boolean {\n  if (session == null) {\n    return false;\n  }\n\n  const now = dateNow();\n  const lifetimeValid = now - session.started < SESSION_EXPIRATION_TIME;\n\n  if (!lifetimeValid) {\n    return false;\n  }\n\n  const inactivityPeriodValid = now - session.lastActivity < SESSION_INACTIVITY_TIME;\n  return inactivityPeriodValid;\n}\n\ntype GetUserSessionUpdaterParams = {\n  storeUserSession: (session: FaroUserSession) => void;\n  fetchUserSession: () => FaroUserSession | null;\n};\n\ntype UpdateSessionParams = { forceSessionExtend: boolean };\n\nexport function getUserSessionUpdater({\n  fetchUserSession,\n  storeUserSession,\n}: GetUserSessionUpdaterParams): (options?: UpdateSessionParams) => void {\n  return function updateSession({ forceSessionExtend } = { forceSessionExtend: false }): void {\n    if (!fetchUserSession || !storeUserSession) {\n      return;\n    }\n\n    const sessionTrackingConfig = faro.config.sessionTracking;\n    const isPersistentSessions = sessionTrackingConfig?.persistent;\n\n    if ((isPersistentSessions && !isLocalStorageAvailable) || (!isPersistentSessions && !isSessionStorageAvailable)) {\n      return;\n    }\n\n    const sessionFromStorage = fetchUserSession();\n\n    if (forceSessionExtend === false && isUserSessionValid(sessionFromStorage)) {\n      storeUserSession({ ...sessionFromStorage!, lastActivity: dateNow() });\n    } else {\n      let newSession = addSessionMetadataToNextSession(\n        createUserSessionObject({ isSampled: isSampled() }),\n        sessionFromStorage\n      );\n\n      storeUserSession(newSession);\n\n      faro.api?.setSession(newSession.sessionMeta);\n      sessionTrackingConfig?.onSessionChange?.(sessionFromStorage?.sessionMeta ?? null, newSession.sessionMeta!);\n    }\n  };\n}\n\nexport function addSessionMetadataToNextSession(newSession: FaroUserSession, previousSession: FaroUserSession | null) {\n  const sessionWithMeta: Required<FaroUserSession> = {\n    ...newSession,\n    sessionMeta: {\n      id: newSession.sessionId,\n      attributes: {\n        ...faro.config.sessionTracking?.session?.attributes,\n        ...(faro.metas.value.session?.attributes ?? {}),\n        isSampled: newSession.isSampled.toString(),\n      },\n    },\n  };\n\n  const overrides = faro.metas.value.session?.overrides ?? previousSession?.sessionMeta?.overrides;\n  if (!isEmpty(overrides)) {\n    sessionWithMeta.sessionMeta.overrides = overrides;\n  }\n\n  const previousSessionId = previousSession?.sessionId;\n  if (previousSessionId != null) {\n    sessionWithMeta.sessionMeta.attributes!['previousSession'] = previousSessionId;\n  }\n\n  return sessionWithMeta;\n}\n\ntype GetUserSessionMetaUpdateHandlerParams = {\n  storeUserSession: (session: FaroUserSession) => void;\n  fetchUserSession: () => FaroUserSession | null;\n};\n\nexport function getSessionMetaUpdateHandler({\n  fetchUserSession,\n  storeUserSession,\n}: GetUserSessionMetaUpdateHandlerParams) {\n  return function syncSessionIfChangedExternally(meta: Meta) {\n    const session = meta.session;\n    const sessionFromSessionStorage = fetchUserSession();\n\n    let sessionId = session?.id;\n    const sessionAttributes = session?.attributes;\n    const sessionOverrides = session?.overrides;\n\n    const storedSessionMeta = sessionFromSessionStorage?.sessionMeta;\n    const storedSessionMetaOverrides = storedSessionMeta?.overrides;\n\n    const hasSessionOverridesChanged = !!sessionOverrides && !deepEqual(sessionOverrides, storedSessionMetaOverrides);\n    const hasAttributesChanged = !!sessionAttributes && !deepEqual(sessionAttributes, storedSessionMeta?.attributes);\n    const hasSessionIdChanged = !!session && sessionId !== sessionFromSessionStorage?.sessionId;\n\n    if (hasSessionIdChanged || hasAttributesChanged || hasSessionOverridesChanged) {\n      const userSession = addSessionMetadataToNextSession(\n        createUserSessionObject({ sessionId, isSampled: isSampled() }),\n        sessionFromSessionStorage\n      );\n\n      storeUserSession(userSession);\n      sendOverrideEvent(hasSessionOverridesChanged, sessionOverrides, storedSessionMetaOverrides);\n      faro.api.setSession(userSession.sessionMeta);\n    }\n  };\n}\n\nfunction sendOverrideEvent(\n  hasSessionOverridesChanged: boolean,\n  sessionOverrides: MetaOverrides = {},\n  storedSessionOverrides: MetaOverrides = {}\n) {\n  if (!hasSessionOverridesChanged) {\n    return;\n  }\n\n  const serviceName = sessionOverrides.serviceName;\n  const previousServiceName = storedSessionOverrides.serviceName ?? faro.metas.value.app?.name ?? '';\n\n  if (serviceName && serviceName !== previousServiceName) {\n    faro.api.pushEvent(EVENT_OVERRIDES_SERVICE_NAME, {\n      serviceName,\n      previousServiceName,\n    });\n  }\n}\n", "import { faro, stringifyExternalJson } from '@grafana/faro-core';\n\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\n\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nimport type { FaroUserSession } from './types';\n\nexport class PersistentSessionsManager {\n  private static storageTypeLocal = webStorageType.local;\n  private updateUserSession: ReturnType<typeof getUserSessionUpdater>;\n\n  constructor() {\n    this.updateUserSession = getUserSessionUpdater({\n      fetchUserSession: PersistentSessionsManager.fetchUserSession,\n      storeUserSession: PersistentSessionsManager.storeUserSession,\n    });\n\n    this.init();\n  }\n\n  static removeUserSession() {\n    removeItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n  }\n\n  static storeUserSession(session: FaroUserSession): void {\n    setItem(STORAGE_KEY, stringifyExternalJson(session), PersistentSessionsManager.storageTypeLocal);\n  }\n\n  static fetchUserSession(): FaroUserSession | null {\n    const storedSession = getItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n\n    if (storedSession) {\n      return JSON.parse(storedSession) as FaroUserSession;\n    }\n\n    return null;\n  }\n\n  updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n\n  private init(): void {\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'visible') {\n        this.updateSession();\n      }\n    });\n\n    // Users can call the setSession() method, so we need to sync this with the local storage session\n    faro.metas.addListener(\n      getSessionMetaUpdateHandler({\n        fetchUserSession: PersistentSessionsManager.fetchUserSession,\n        storeUserSession: PersistentSessionsManager.storeUserSession,\n      })\n    );\n  }\n}\n", "import { faro, stringifyExternalJson } from '@grafana/faro-core';\n\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\n\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nimport type { FaroUserSession } from './types';\n\nexport class VolatileSessionsManager {\n  private static storageTypeSession = webStorageType.session;\n  private updateUserSession: ReturnType<typeof getUserSessionUpdater>;\n\n  constructor() {\n    this.updateUserSession = getUserSessionUpdater({\n      fetchUserSession: VolatileSessionsManager.fetchUserSession,\n      storeUserSession: VolatileSessionsManager.storeUserSession,\n    });\n\n    this.init();\n  }\n\n  static removeUserSession() {\n    removeItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n  }\n\n  static storeUserSession(session: FaroUserSession): void {\n    setItem(STORAGE_KEY, stringifyExternalJson(session), VolatileSessionsManager.storageTypeSession);\n  }\n\n  static fetchUserSession(): FaroUserSession | null {\n    const storedSession = getItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n\n    if (storedSession) {\n      return JSON.parse(storedSession) as FaroUserSession;\n    }\n\n    return null;\n  }\n\n  updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n\n  private init(): void {\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'visible') {\n        this.updateSession();\n      }\n    });\n\n    // Users can call the setSession() method, so we need to sync this with the local storage session\n    faro.metas.addListener(\n      getSessionMetaUpdateHandler({\n        fetchUserSession: VolatileSessionsManager.fetchUserSession,\n        storeUserSession: VolatileSessionsManager.storeUserSession,\n      })\n    );\n  }\n}\n", "import type { Config } from '@grafana/faro-core';\n\nimport { PersistentSessionsManager } from './PersistentSessionsManager';\nimport type { SessionManager } from './types';\nimport { VolatileSessionsManager } from './VolatileSessionManager';\n\nexport function getSessionManagerByConfig(sessionTrackingConfig: Config['sessionTracking']): SessionManager {\n  return sessionTrackingConfig?.persistent ? PersistentSessionsManager : VolatileSessionsManager;\n}\n", "import {\n  BaseInstrumentation,\n  dateNow,\n  EVENT_SESSION_EXTEND,\n  EVENT_SESSION_RESUME,\n  EVENT_SESSION_START,\n  VERSION,\n} from '@grafana/faro-core';\nimport type { Config, Meta, MetaSession } from '@grafana/faro-core';\n\nimport type { TransportItem } from '../..';\nimport { createSession } from '../../metas';\n\nimport { type FaroUserSession, getSessionManagerByConfig, isSampled } from './sessionManager';\nimport { PersistentSessionsManager } from './sessionManager/PersistentSessionsManager';\nimport { createUserSessionObject, isUserSessionValid } from './sessionManager/sessionManagerUtils';\nimport type { SessionManager } from './sessionManager/types';\n\ntype LifecycleType = typeof EVENT_SESSION_RESUME | typeof EVENT_SESSION_START;\n\nexport class SessionInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-session';\n  readonly version = VERSION;\n\n  // previously notified session, to ensure we don't send session start\n  // event twice for the same session\n  private notifiedSession: MetaSession | undefined;\n\n  private sendSessionStartEvent(meta: Meta): void {\n    const session = meta.session;\n\n    if (session && session.id !== this.notifiedSession?.id) {\n      if (this.notifiedSession && this.notifiedSession.id === session.attributes?.['previousSession']) {\n        this.api.pushEvent(EVENT_SESSION_EXTEND, {}, undefined, { skipDedupe: true });\n        this.notifiedSession = session;\n        return;\n      }\n\n      this.notifiedSession = session;\n      // no need to add attributes and session id, they are included as part of meta\n      // automatically\n      this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n    }\n  }\n\n  private createInitialSession(\n    SessionManager: SessionManager,\n    sessionsConfig: Required<Config>['sessionTracking']\n  ): {\n    initialSession: FaroUserSession;\n    lifecycleType: LifecycleType;\n  } {\n    let storedUserSession: FaroUserSession | null = SessionManager.fetchUserSession();\n\n    if (sessionsConfig.persistent && sessionsConfig.maxSessionPersistenceTime && storedUserSession) {\n      const now = dateNow();\n      const shouldClearPersistentSession =\n        storedUserSession.lastActivity < now - sessionsConfig.maxSessionPersistenceTime;\n\n      if (shouldClearPersistentSession) {\n        PersistentSessionsManager.removeUserSession();\n        storedUserSession = null;\n      }\n    }\n\n    let lifecycleType: LifecycleType;\n    let initialSession: FaroUserSession;\n\n    if (isUserSessionValid(storedUserSession)) {\n      const sessionId = storedUserSession?.sessionId;\n\n      initialSession = createUserSessionObject({\n        sessionId,\n        isSampled: storedUserSession!.isSampled || false,\n        started: storedUserSession?.started,\n      });\n\n      const storedUserSessionMeta = storedUserSession?.sessionMeta;\n\n      // For resumed sessions we want to merge the previous overrides with the configured ones.\n      // If the same key is present in both, the new one will override the old one.\n      const overrides = { ...sessionsConfig.session?.overrides, ...storedUserSessionMeta?.overrides };\n\n      initialSession.sessionMeta = {\n        ...sessionsConfig.session,\n        id: sessionId,\n        attributes: {\n          ...sessionsConfig.session?.attributes,\n          ...storedUserSessionMeta?.attributes,\n          // For valid resumed sessions we do not want to recalculate the sampling decision on each init phase.\n          isSampled: initialSession.isSampled.toString(),\n        },\n        overrides,\n      };\n\n      lifecycleType = EVENT_SESSION_RESUME;\n    } else {\n      const sessionId = sessionsConfig.session?.id ?? createSession().id;\n\n      initialSession = createUserSessionObject({\n        sessionId,\n        isSampled: isSampled(),\n      });\n\n      const overrides = sessionsConfig.session?.overrides;\n\n      initialSession.sessionMeta = {\n        id: sessionId,\n        attributes: {\n          isSampled: initialSession.isSampled.toString(),\n          ...sessionsConfig.session?.attributes,\n        },\n        // new session we don't care about previous overrides\n        ...(overrides ? { overrides } : {}),\n      };\n\n      lifecycleType = EVENT_SESSION_START;\n    }\n\n    return { initialSession, lifecycleType };\n  }\n\n  private registerBeforeSendHook(SessionManager: SessionManager) {\n    const { updateSession } = new SessionManager();\n\n    this.transports?.addBeforeSendHooks((item) => {\n      updateSession();\n\n      const attributes = item.meta.session?.attributes;\n\n      if (attributes && attributes?.['isSampled'] === 'true') {\n        let newItem: TransportItem = JSON.parse(JSON.stringify(item));\n\n        const newAttributes = newItem.meta.session?.attributes;\n        delete newAttributes?.['isSampled'];\n\n        if (Object.keys(newAttributes ?? {}).length === 0) {\n          delete newItem.meta.session?.attributes;\n        }\n\n        return newItem;\n      }\n\n      return null;\n    });\n  }\n\n  initialize() {\n    this.logDebug('init session instrumentation');\n\n    const sessionTrackingConfig = this.config.sessionTracking;\n\n    if (sessionTrackingConfig?.enabled) {\n      const SessionManager = getSessionManagerByConfig(sessionTrackingConfig);\n\n      this.registerBeforeSendHook(SessionManager);\n\n      const { initialSession, lifecycleType } = this.createInitialSession(SessionManager, sessionTrackingConfig);\n\n      SessionManager.storeUserSession(initialSession);\n\n      const initialSessionMeta = initialSession.sessionMeta;\n\n      this.notifiedSession = initialSessionMeta;\n      this.api.setSession(initialSessionMeta);\n\n      if (lifecycleType === EVENT_SESSION_START) {\n        this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n      }\n\n      if (lifecycleType === EVENT_SESSION_RESUME) {\n        this.api.pushEvent(EVENT_SESSION_RESUME, {}, undefined, { skipDedupe: true });\n      }\n    }\n\n    this.metas.addListener(this.sendSessionStartEvent.bind(this));\n  }\n}\n", "import { BaseInstrumentation, stringifyObjectValues, VERSION } from '@grafana/faro-core';\nimport type { Instrumentation } from '@grafana/faro-core';\n\nexport class CSPInstrumentation extends BaseInstrumentation implements Instrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-csp';\n  readonly version = VERSION;\n\n  constructor() {\n    super();\n  }\n\n  initialize() {\n    document.addEventListener('securitypolicyviolation', this.securitypolicyviolationHandler.bind(this));\n  }\n\n  destroy() {\n    document.removeEventListener('securitypolicyviolation', this.securitypolicyviolationHandler);\n  }\n\n  public securitypolicyviolationHandler(ev: SecurityPolicyViolationEvent) {\n    this.api.pushEvent('securitypolicyviolation', stringifyObjectValues(ev as Record<string, any>));\n  }\n}\n", "import { Observable } from '@grafana/faro-core';\n\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './monitors/const';\nimport type { HttpRequestEndMessage, HttpRequestStartMessage } from './monitors/types';\n\ntype OperationKey = string;\n\nexport function isRequestStartMessage(msg: any): msg is HttpRequestStartMessage {\n  return msg.type === MESSAGE_TYPE_HTTP_REQUEST_START;\n}\n\nexport function isRequestEndMessage(msg: any): msg is HttpRequestEndMessage {\n  return msg.type === MESSAGE_TYPE_HTTP_REQUEST_END;\n}\n\nexport interface ActivityWindowTrackerOptions<TMsg = any> {\n  inactivityMs?: number;\n  drainTimeoutMs?: number;\n  isOperationStart?: (msg: TMsg) => OperationKey | undefined;\n  isOperationEnd?: (msg: TMsg) => OperationKey | undefined;\n}\n\n/**\n * Tracks events in a timeâboxed activity window. When the window goes quiet for `inactivityMs`,\n * it enters a draining phase: new short events are ignored; only active operations are awaited\n * until they end or `drainTimeoutMs` elapses.\n */\nexport class ActivityWindowTracker extends Observable {\n  eventsObservable: Observable;\n\n  private _tracking = false;\n  private _inactivityTid?: number;\n  private _drainTid?: number;\n  private _currentEvents?: any[];\n  private _activeOperations?: Map<OperationKey, true>;\n  private _startTime?: number;\n  private _lastEventTime?: number;\n  private _options: Required<ActivityWindowTrackerOptions>;\n\n  constructor(eventsObservable: Observable, options?: ActivityWindowTrackerOptions) {\n    super();\n    this.eventsObservable = eventsObservable;\n    this._options = {\n      inactivityMs: options?.inactivityMs ?? 100,\n      drainTimeoutMs: options?.drainTimeoutMs ?? 10 * 1000,\n      isOperationStart: options?.isOperationStart ?? (() => undefined),\n      isOperationEnd: options?.isOperationEnd ?? (() => undefined),\n    } as Required<ActivityWindowTrackerOptions>;\n    this._initialize();\n  }\n\n  private _initialize() {\n    this.eventsObservable\n      .filter(() => {\n        return this._tracking;\n      })\n      .subscribe((event) => {\n        this._lastEventTime = Date.now();\n        this._currentEvents?.push(event);\n\n        const startKey = this._options.isOperationStart(event as any);\n        if (startKey) {\n          this._activeOperations?.set(startKey, true);\n        }\n\n        const endKey = this._options.isOperationEnd(event as any);\n        if (endKey) {\n          this._activeOperations?.delete(endKey);\n        }\n\n        this._scheduleInactivityCheck();\n      });\n  }\n\n  startTracking() {\n    if (this._tracking) {\n      return;\n    }\n\n    this._tracking = true;\n    this._startTime = Date.now();\n    this._lastEventTime = Date.now();\n\n    this.notify({\n      message: 'tracking-started',\n    });\n\n    this._currentEvents = [];\n    this._activeOperations = new Map<OperationKey, true>();\n    this._scheduleInactivityCheck();\n  }\n\n  stopTracking() {\n    this._tracking = false;\n    this._clearTimer(this._inactivityTid);\n    this._clearTimer(this._drainTid);\n\n    let duration = 0;\n    if (this.hasActiveOperations()) {\n      duration = Date.now() - this._startTime!;\n    } else {\n      duration = this._lastEventTime ? this._lastEventTime - this._startTime! : 0;\n    }\n\n    this.notify({\n      message: 'tracking-ended',\n      events: this._currentEvents,\n      duration: duration,\n    });\n  }\n\n  private _scheduleInactivityCheck() {\n    this._inactivityTid = startTimeout(\n      this._inactivityTid,\n      () => {\n        if (this.hasActiveOperations()) {\n          this._startDrainTimeout();\n        } else {\n          this.stopTracking();\n        }\n      },\n      this._options.inactivityMs\n    );\n  }\n\n  private _startDrainTimeout() {\n    this._drainTid = startTimeout(\n      this._drainTid,\n      () => {\n        this.stopTracking();\n      },\n      this._options.drainTimeoutMs\n    );\n  }\n\n  private hasActiveOperations(): boolean {\n    return !!this._activeOperations && this._activeOperations.size > 0;\n  }\n\n  private _clearTimer(id?: number) {\n    if (id) {\n      clearTimeout(id);\n    }\n  }\n}\n\nfunction startTimeout(timeoutId: number | undefined, cb: () => void, delay: number) {\n  if (timeoutId) {\n    clearTimeout(timeoutId);\n  }\n\n  //@ts-expect-error for some reason vscode is using the node types\n  timeoutId = setTimeout(() => {\n    cb();\n  }, delay);\n\n  return timeoutId;\n}\n", "import { Observable } from '@grafana/faro-core';\n\nexport const MESSAGE_TYPE_INTERACTION = 'interaction';\n\nexport type InteractionMessage = {\n  type: typeof MESSAGE_TYPE_INTERACTION;\n  name: string;\n};\n\nlet interactionObservable: Observable<InteractionMessage> | undefined;\nconst registeredEventNames = new Set<string>();\nconst eventNameToHandler = new Map<string, (e: Event) => void>();\n\nexport function monitorInteractions(eventNames: string[]): Observable<InteractionMessage> {\n  if (!interactionObservable) {\n    interactionObservable = new Observable<InteractionMessage>();\n  }\n\n  eventNames.forEach((eventName) => {\n    if (!registeredEventNames.has(eventName)) {\n      const handler = () => {\n        interactionObservable!.notify({ type: MESSAGE_TYPE_INTERACTION, name: eventName });\n      };\n      window.addEventListener(eventName, handler);\n      registeredEventNames.add(eventName);\n      eventNameToHandler.set(eventName, handler);\n    }\n  });\n\n  return interactionObservable;\n}\n\n// Test-only utility to reset state between tests\nexport function __resetInteractionMonitorForTests() {\n  eventNameToHandler.forEach((handler, eventName) => {\n    window.removeEventListener(eventName, handler);\n  });\n  eventNameToHandler.clear();\n  registeredEventNames.clear();\n  interactionObservable = undefined;\n}\n", "import { Observable } from '@grafana/faro-core';\n\nexport const MESSAGE_TYPE_URL_CHANGE = 'url-change';\n\nexport type UrlChangeMessage = {\n  type: typeof MESSAGE_TYPE_URL_CHANGE;\n  from: string;\n  to: string;\n  trigger: 'pushState' | 'replaceState' | 'popstate' | 'hashchange' | 'navigate' | 'navigate-intercept';\n};\n\nlet urlChangeObservable: Observable<UrlChangeMessage> | undefined;\nlet isInstrumented = false;\nlet lastHref: string | undefined;\nlet originalPushState: typeof window.history.pushState | undefined;\nlet originalReplaceState: typeof window.history.replaceState | undefined;\nlet onPopStateHandler: ((this: Window, ev: PopStateEvent) => any) | undefined;\nlet onHashChangeHandler: ((this: Window, ev: HashChangeEvent) => any) | undefined;\nlet onNavigateHandler: ((this: any, ev: any) => any) | undefined;\nlet originalNavigateEventIntercept: (((this: any, options?: any) => any) & { _faroWrapped?: boolean }) | undefined;\n\nexport function monitorUrlChanges(): Observable<UrlChangeMessage> {\n  if (!urlChangeObservable) {\n    urlChangeObservable = new Observable<UrlChangeMessage>();\n    lastHref = location.href;\n  }\n\n  function emit(trigger: UrlChangeMessage['trigger'], toOverride?: string) {\n    const next = toOverride ?? location.href;\n    if (next !== lastHref) {\n      urlChangeObservable!.notify({ type: MESSAGE_TYPE_URL_CHANGE, from: lastHref!, to: next, trigger });\n      lastHref = next;\n    }\n  }\n\n  if (!isInstrumented) {\n    const hasNavigation = 'navigation' in window && 'NavigateEvent' in (window as any);\n\n    if (hasNavigation) {\n      // Prefer Navigation API when supported: do not patch history or add popstate/hashchange listeners\n      onNavigateHandler = (e: any) => {\n        try {\n          const destination = e?.destination as { url?: string; sameDocument?: boolean } | undefined;\n          if (destination?.sameDocument && typeof destination.url === 'string') {\n            emit('navigate', destination.url);\n          }\n        } catch (_err) {\n          // Swallow to avoid impacting host app\n        }\n      };\n      (window as any).navigation.addEventListener('navigate', onNavigateHandler as any);\n\n      const NavigateEventConstructor = (window as any).NavigateEvent;\n      if (\n        NavigateEventConstructor &&\n        NavigateEventConstructor.prototype &&\n        typeof NavigateEventConstructor.prototype.intercept === 'function'\n      ) {\n        if (!originalNavigateEventIntercept) {\n          originalNavigateEventIntercept = NavigateEventConstructor.prototype.intercept;\n        }\n\n        // Wrap intercept to detect soft navigations (cross-document turned same-document)\n        NavigateEventConstructor.prototype.intercept = function (this: any, options?: any) {\n          try {\n            const canIntercept = !!this?.canIntercept;\n            const destination = this?.destination as { url?: string; sameDocument?: boolean } | undefined;\n            if (\n              canIntercept &&\n              destination &&\n              destination.sameDocument === false &&\n              typeof destination.url === 'string'\n            ) {\n              emit('navigate-intercept', destination.url);\n            }\n          } catch (_err) {\n            // ignore\n          }\n          return originalNavigateEventIntercept!.call(this, options);\n        } as typeof originalNavigateEventIntercept;\n      }\n\n      isInstrumented = true;\n    } else {\n      // Fallback: history API patching + popstate/hashchange\n      if (!originalPushState) {\n        originalPushState = window.history.pushState;\n      }\n      window.history.pushState = function (...args: Parameters<typeof window.history.pushState>) {\n        const result = originalPushState!.apply(window.history, args as any);\n        emit('pushState');\n        return result;\n      } as typeof window.history.pushState;\n\n      if (!originalReplaceState) {\n        originalReplaceState = window.history.replaceState;\n      }\n      window.history.replaceState = function (...args: Parameters<typeof window.history.replaceState>) {\n        const result = originalReplaceState!.apply(window.history, args as any);\n        emit('replaceState');\n        return result;\n      } as typeof window.history.replaceState;\n\n      onPopStateHandler = () => emit('popstate');\n      onHashChangeHandler = () => emit('hashchange');\n      window.addEventListener('popstate', onPopStateHandler);\n      window.addEventListener('hashchange', onHashChangeHandler);\n\n      isInstrumented = true;\n    }\n  }\n\n  return urlChangeObservable;\n}\n\n// Test-only utility to reset state between tests\nexport function __resetUrlChangeMonitorForTests() {\n  if (onPopStateHandler) {\n    window.removeEventListener('popstate', onPopStateHandler);\n  }\n  if (onHashChangeHandler) {\n    window.removeEventListener('hashchange', onHashChangeHandler);\n  }\n  if (onNavigateHandler && (window as any).navigation?.removeEventListener) {\n    (window as any).navigation.removeEventListener('navigate', onNavigateHandler as any);\n  }\n  if (originalPushState) {\n    window.history.pushState = originalPushState;\n  }\n  if (originalReplaceState) {\n    window.history.replaceState = originalReplaceState;\n  }\n  if (originalNavigateEventIntercept && (window as any).NavigateEvent?.prototype) {\n    (window as any).NavigateEvent.prototype.intercept = originalNavigateEventIntercept;\n  }\n  urlChangeObservable = undefined;\n  isInstrumented = false;\n  lastHref = undefined;\n  onPopStateHandler = undefined;\n  onHashChangeHandler = undefined;\n  onNavigateHandler = undefined;\n  originalPushState = undefined;\n  originalReplaceState = undefined;\n  originalNavigateEventIntercept = undefined;\n}\n", "import { BaseInstrumentation, faro, Observable, VERSION } from '@grafana/faro-core';\n\nimport { ActivityWindowTracker, isRequestEndMessage, isRequestStartMessage } from '../_internal/activityWindowTracker';\nimport { monitorDomMutations } from '../_internal/monitors/domMutationMonitor';\nimport { monitorHttpRequests } from '../_internal/monitors/httpRequestMonitor';\nimport { monitorInteractions } from '../_internal/monitors/interactionMonitor';\nimport { monitorUrlChanges } from '../_internal/monitors/urlChangeMonitor';\n\nexport class NavigationInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-navigation';\n  readonly version = VERSION;\n\n  override initialize(): void {\n    const httpMonitor = monitorHttpRequests();\n    const domMutationsMonitor = monitorDomMutations();\n    const urlMonitor = monitorUrlChanges();\n    const interactionMonitor = monitorInteractions(['pointerdown', 'keydown']);\n\n    const activityWindowTracker = new ActivityWindowTracker(\n      new Observable().merge(httpMonitor, domMutationsMonitor, urlMonitor),\n      {\n        inactivityMs: 100,\n        drainTimeoutMs: 10 * 1000,\n        isOperationStart: (msg) => (isRequestStartMessage(msg) ? msg.request.requestId : undefined),\n        isOperationEnd: (msg) => (isRequestEndMessage(msg) ? msg.request.requestId : undefined),\n      }\n    );\n\n    activityWindowTracker\n      .filter((msg) => {\n        return msg.message === 'tracking-ended';\n      })\n      .subscribe((msg) => {\n        if (\n          msg.events?.some((e: any) => e.type === 'url-change') &&\n          msg.events?.some((e: any) => e.type === 'dom-mutation')\n        ) {\n          const urlChange = msg.events?.find((e: any) => e.type === 'url-change');\n          faro.api.pushEvent('faro.navigation', {\n            fromUrl: urlChange?.from,\n            toUrl: urlChange?.to,\n            sameDocument: String(true),\n            duration: msg.duration,\n          });\n        }\n      });\n\n    interactionMonitor.subscribe(() => {\n      activityWindowTracker.startTracking();\n    });\n  }\n}\n", "import type { Instrumentation } from '@grafana/faro-core';\n\nimport {\n  ConsoleInstrumentation,\n  CSPInstrumentation,\n  ErrorsInstrumentation,\n  NavigationInstrumentation,\n  PerformanceInstrumentation,\n  SessionInstrumentation,\n  UserActionInstrumentation,\n  ViewInstrumentation,\n  WebVitalsInstrumentation,\n} from '../instrumentations';\n\nimport type { GetWebInstrumentationsOptions } from './types';\n\nexport function getWebInstrumentations(options: GetWebInstrumentationsOptions = {}): Instrumentation[] {\n  const instrumentations: Instrumentation[] = [\n    new UserActionInstrumentation(),\n    new ErrorsInstrumentation(),\n    new WebVitalsInstrumentation(),\n    new SessionInstrumentation(),\n    new ViewInstrumentation(),\n    new NavigationInstrumentation(),\n  ];\n\n  if (options.enablePerformanceInstrumentation !== false) {\n    // unshift to ensure that initialization starts before the other instrumentations\n    instrumentations.unshift(new PerformanceInstrumentation());\n  }\n\n  if (options.enableContentSecurityPolicyInstrumentation !== false) {\n    instrumentations.push(new CSPInstrumentation());\n  }\n\n  if (options.captureConsole !== false) {\n    instrumentations.push(new ConsoleInstrumentation());\n  }\n\n  return instrumentations;\n}\n", "export const defaultEventDomain = 'browser';\n", "import { BaseTransport, getTransportBody, LogLevel, VERSION } from '@grafana/faro-core';\nimport type { TransportItem } from '@grafana/faro-core';\n\nimport type { ConsoleTransportOptions } from './types';\n\nexport class ConsoleTransport extends BaseTransport {\n  readonly name = '@grafana/faro-web-sdk:transport-console';\n  readonly version = VERSION;\n\n  constructor(private options: ConsoleTransportOptions = {}) {\n    super();\n  }\n\n  send(item: TransportItem): void {\n    return this.unpatchedConsole[this.options.level ?? LogLevel.DEBUG]('New event', getTransportBody([item]));\n  }\n}\n", "import { BaseExtension, BaseTransport, createPromiseBuffer, getTransportBody, noop, VERSION } from '@grafana/faro-core';\nimport type { Config, Patterns, PromiseBuffer, TransportItem } from '@grafana/faro-core';\n\nimport { getSessionManagerByConfig } from '../../instrumentations/session/sessionManager';\nimport { getUserSessionUpdater } from '../../instrumentations/session/sessionManager/sessionManagerUtils';\n\nimport type { FetchTransportOptions } from './types';\n\nconst DEFAULT_BUFFER_SIZE = 30;\nconst DEFAULT_CONCURRENCY = 5; // chrome supports 10 total, firefox 17\nconst DEFAULT_RATE_LIMIT_BACKOFF_MS = 5000;\n\nconst BEACON_BODY_SIZE_LIMIT = 60000;\nconst TOO_MANY_REQUESTS = 429;\nconst ACCEPTED = 202;\n\nexport class FetchTransport extends BaseTransport {\n  readonly name = '@grafana/faro-web-sdk:transport-fetch';\n  readonly version = VERSION;\n\n  promiseBuffer: PromiseBuffer<Response | void>;\n\n  private readonly rateLimitBackoffMs: number;\n  private readonly getNow: () => number;\n  private disabledUntil: Date = new Date();\n\n  constructor(private options: FetchTransportOptions) {\n    super();\n\n    this.rateLimitBackoffMs = options.defaultRateLimitBackoffMs ?? DEFAULT_RATE_LIMIT_BACKOFF_MS;\n    this.getNow = options.getNow ?? (() => Date.now());\n\n    this.promiseBuffer = createPromiseBuffer({\n      size: options.bufferSize ?? DEFAULT_BUFFER_SIZE,\n      concurrency: options.concurrency ?? DEFAULT_CONCURRENCY,\n    });\n  }\n\n  async send(items: TransportItem[]): Promise<void> {\n    try {\n      if (this.disabledUntil > new Date(this.getNow())) {\n        this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`);\n\n        return Promise.resolve();\n      }\n\n      await this.promiseBuffer.add(() => {\n        const body = JSON.stringify(getTransportBody(items));\n\n        const { url, requestOptions, apiKey } = this.options;\n\n        const { headers, ...restOfRequestOptions } = requestOptions ?? {};\n\n        let sessionId;\n        const sessionMeta = this.metas.value.session;\n        if (sessionMeta != null) {\n          sessionId = sessionMeta.id;\n        }\n\n        return fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            ...(headers ?? {}),\n            ...(apiKey ? { 'x-api-key': apiKey } : {}),\n            ...(sessionId ? { 'x-faro-session-id': sessionId } : {}),\n          },\n          body,\n          keepalive: body.length <= BEACON_BODY_SIZE_LIMIT,\n          ...(restOfRequestOptions ?? {}),\n        })\n          .then(async (response) => {\n            if (response.status === ACCEPTED) {\n              const sessionExpired = response.headers.get('X-Faro-Session-Status') === 'invalid';\n\n              if (sessionExpired) {\n                this.extendFaroSession(this.config, this.logDebug);\n              }\n            }\n\n            if (response.status === TOO_MANY_REQUESTS) {\n              this.disabledUntil = this.getRetryAfterDate(response);\n              this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`);\n            }\n\n            // read the body so the connection can be closed\n            response.text().catch(noop);\n            return response;\n          })\n          .catch((err) => {\n            this.logError('Failed sending payload to the receiver\\n', JSON.parse(body), err);\n          });\n      });\n    } catch (err) {\n      this.logError(err);\n    }\n  }\n\n  override getIgnoreUrls(): Patterns {\n    return ([this.options.url] as Patterns).concat(this.config.ignoreUrls ?? []);\n  }\n\n  override isBatched(): boolean {\n    return true;\n  }\n\n  private getRetryAfterDate(response: Response): Date {\n    const now = this.getNow();\n    const retryAfterHeader = response.headers.get('Retry-After');\n\n    if (retryAfterHeader) {\n      const delay = Number(retryAfterHeader);\n\n      if (!isNaN(delay)) {\n        return new Date(delay * 1000 + now);\n      }\n\n      const date = Date.parse(retryAfterHeader);\n\n      if (!isNaN(date)) {\n        return new Date(date);\n      }\n    }\n\n    return new Date(now + this.rateLimitBackoffMs);\n  }\n\n  private extendFaroSession(config: Config, logDebug: BaseExtension['logDebug']) {\n    const SessionExpiredString = `Session expired`;\n\n    const sessionTrackingConfig = config.sessionTracking;\n\n    if (sessionTrackingConfig?.enabled) {\n      const { fetchUserSession, storeUserSession } = getSessionManagerByConfig(sessionTrackingConfig);\n\n      getUserSessionUpdater({ fetchUserSession, storeUserSession })({ forceSessionExtend: true });\n\n      logDebug(`${SessionExpiredString} created new session.`);\n    } else {\n      logDebug(`${SessionExpiredString}.`);\n    }\n  }\n}\n", "import type { Meta, MetaItem } from '@grafana/faro-core';\n\ntype K6Properties = {\n  testRunId?: string;\n};\n\nexport const k6Meta: MetaItem<Pick<Meta, 'k6'>> = () => {\n  const k6Properties: K6Properties = (window as any).k6;\n\n  return {\n    k6: {\n      // we only add the k6 meta if Faro is running inside a k6 environment, so this is always true\n      isK6Browser: true,\n      ...(k6Properties?.testRunId && { testRunId: k6Properties?.testRunId }),\n    },\n  };\n};\n", "import { isFunction, type Meta, type MetaItem } from '@grafana/faro-core';\n\nlet currentHref: string | undefined;\nlet pageId: string | undefined;\n\ntype createPageMetaProps = {\n  generatePageId?: (location: Location) => string;\n  initialPageMeta?: Meta['page'];\n};\n\nexport function createPageMeta({ generatePageId, initialPageMeta }: createPageMetaProps = {}): MetaItem<\n  Pick<Meta, 'page'>\n> {\n  const pageMeta: MetaItem<Pick<Meta, 'page'>> = () => {\n    const locationHref = location.href;\n\n    if (isFunction(generatePageId) && currentHref !== locationHref) {\n      currentHref = locationHref;\n      pageId = generatePageId(location);\n    }\n\n    return {\n      page: {\n        url: locationHref,\n        ...(pageId ? { id: pageId } : {}),\n        ...initialPageMeta,\n      },\n    };\n  };\n\n  return pageMeta;\n}\n", "import {\n  createInternalLogger,\n  defaultBatchingConfig,\n  defaultGlobalObjectKey,\n  defaultInternalLoggerLevel,\n  defaultLogArgsSerializer,\n  defaultUnpatchedConsole,\n  isBoolean,\n  isEmpty,\n  isObject,\n} from '@grafana/faro-core';\nimport type { Config, Instrumentation, MetaItem, MetaSession, Transport } from '@grafana/faro-core';\n\nimport { defaultEventDomain } from '../consts';\nimport { parseStacktrace } from '../instrumentations';\nimport { defaultSessionTrackingConfig } from '../instrumentations/session';\nimport { userActionDataAttribute } from '../instrumentations/userActions/const';\nimport { browserMeta } from '../metas';\nimport { k6Meta } from '../metas/k6';\nimport { createPageMeta } from '../metas/page';\nimport { FetchTransport } from '../transports';\n\nimport { getWebInstrumentations } from './getWebInstrumentations';\nimport type { BrowserConfig } from './types';\n\nexport function makeCoreConfig(browserConfig: BrowserConfig): Config {\n  const transports: Transport[] = [];\n\n  const internalLogger = createInternalLogger(browserConfig.unpatchedConsole, browserConfig.internalLoggerLevel);\n\n  if (browserConfig.transports) {\n    if (browserConfig.url || browserConfig.apiKey) {\n      internalLogger.error('if \"transports\" is defined, \"url\" and \"apiKey\" should not be defined');\n    }\n\n    transports.push(...browserConfig.transports);\n  } else if (browserConfig.url) {\n    transports.push(\n      new FetchTransport({\n        url: browserConfig.url,\n        apiKey: browserConfig.apiKey,\n      })\n    );\n  } else {\n    internalLogger.error('either \"url\" or \"transports\" must be defined');\n  }\n\n  const {\n    // properties with default values\n    dedupe = true,\n    eventDomain = defaultEventDomain,\n    globalObjectKey = defaultGlobalObjectKey,\n    instrumentations = getWebInstrumentations(),\n    internalLoggerLevel = defaultInternalLoggerLevel,\n    isolate = false,\n    logArgsSerializer = defaultLogArgsSerializer,\n    metas = createDefaultMetas(browserConfig),\n    paused = false,\n    preventGlobalExposure = false,\n    unpatchedConsole = defaultUnpatchedConsole,\n    url: browserConfigUrl,\n    experimental,\n    // Properties without default values or which aren't used to create derived config\n    ...restProperties\n  }: BrowserConfig = browserConfig;\n\n  // Extract experimental features with defaults\n  const trackNavigation = experimental?.trackNavigation ?? false;\n\n  // Extract user actions instrumentation with defaults\n  const userActionsInstrumentation = {\n    dataAttributeName: browserConfig.userActionsInstrumentation?.dataAttributeName ?? userActionDataAttribute,\n    excludeItem: browserConfig.userActionsInstrumentation?.excludeItem,\n  };\n\n  return {\n    ...restProperties,\n\n    batching: {\n      ...defaultBatchingConfig,\n      ...browserConfig.batching,\n    },\n    dedupe: dedupe,\n    globalObjectKey,\n    instrumentations: getFilteredInstrumentations(instrumentations, browserConfig),\n    internalLoggerLevel,\n    isolate,\n    logArgsSerializer,\n    metas,\n    parseStacktrace,\n    paused,\n    preventGlobalExposure,\n    transports,\n    unpatchedConsole,\n    eventDomain,\n    ignoreUrls: [\n      ...(browserConfig.ignoreUrls ?? []),\n      // ignore configured cloud collector url by default\n      ...(browserConfigUrl ? [browserConfigUrl] : []),\n      // Try our best to exclude collector URLs form other Faro instances. By default these are URLs ending with /collect or /collect/ followed by alphanumeric characters.\n      /\\/collect(?:\\/[\\w]*)?$/,\n    ],\n    sessionTracking: {\n      ...defaultSessionTrackingConfig,\n      ...browserConfig.sessionTracking,\n      ...crateSessionMeta({\n        trackGeolocation: browserConfig.trackGeolocation,\n        sessionTracking: browserConfig.sessionTracking,\n      }),\n    },\n    userActionsInstrumentation,\n    experimental: {\n      trackNavigation,\n    },\n  };\n}\n\nfunction getFilteredInstrumentations(\n  instrumentations: Instrumentation[],\n  { experimental }: BrowserConfig\n): Instrumentation[] {\n  const trackNavigation = experimental?.trackNavigation ?? false;\n\n  return instrumentations.filter((instr) => {\n    if (instr.name === '@grafana/faro-web-sdk:instrumentation-navigation' && !trackNavigation) {\n      return false;\n    }\n    return true;\n  });\n}\n\nfunction createDefaultMetas(browserConfig: BrowserConfig): MetaItem[] {\n  const { page, generatePageId } = browserConfig?.pageTracking ?? {};\n\n  const initialMetas: MetaItem[] = [\n    browserMeta,\n    createPageMeta({ generatePageId, initialPageMeta: page }),\n    ...(browserConfig.metas ?? []),\n  ];\n\n  const isK6BrowserSession = isObject((window as any)?.k6);\n  if (isK6BrowserSession) {\n    return [...initialMetas, k6Meta];\n  }\n\n  return initialMetas;\n}\n\nfunction crateSessionMeta({\n  trackGeolocation,\n  sessionTracking,\n}: Pick<BrowserConfig, 'trackGeolocation' | 'sessionTracking'>): { session: MetaSession } | {} {\n  const overrides: MetaSession['overrides'] = {};\n\n  if (isBoolean(trackGeolocation)) {\n    overrides.geoLocationTrackingEnabled = trackGeolocation;\n  }\n\n  if (isEmpty(overrides)) {\n    return {};\n  }\n\n  return {\n    session: {\n      ...(sessionTracking?.session ?? {}),\n      overrides,\n    },\n  };\n}\n", "import { initializeFaro as coreInit } from '@grafana/faro-core';\nimport type { Faro } from '@grafana/faro-core';\n\nimport { makeCoreConfig } from './config';\nimport type { BrowserConfig } from './config';\n\nexport function initializeFaro(config: BrowserConfig): Faro {\n  const coreConfig = makeCoreConfig(config);\n\n  if (!coreConfig) {\n    return undefined!;\n  }\n\n  return coreInit(coreConfig);\n}\n"],
  "mappings": "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",
  "names": ["window", "undefined", "VERSION", "regexes", "i", "j", "k", "p", "q", "UAParser", "ua", "$", "TransportItemType", "a", "b", "LogLevel", "o", "subscription", "InternalLoggerLevel", "unpatchedConsole", "internalLogger", "unpatchedConsole", "unpatchedConsole", "internalLogger", "_a", "faro", "faro", "faro", "unpatchedConsole", "internalLogger", "internalLogger", "internalLogger", "internalLogger", "internalLogger", "internalLogger", "UserActionState", "unpatchedConsole", "internalLogger", "unpatchedConsole", "internalLogger", "faro", "internalLogger", "faro", "unpatchedConsole", "internalLogger", "faro", "internalLogger", "v", "internalLogger", "unknownSymbolString", "unknownSymbolString", "_a", "t", "e", "n", "i", "o", "r", "s", "a", "c", "l", "d", "p", "g", "y", "v", "b", "f", "u", "h", "v", "userActionDataAttribute", "_", "s", "faro", "isSampled", "_a", "isRequestStartMessage", "isRequestEndMessage", "startTimeout", "isInstrumented", "e", "isRequestStartMessage", "isRequestEndMessage", "e", "__awaiter", "internalLogger", "unpatchedConsole", "__rest", "initializeFaro"]
}
